/**
 * SHDWXBT - ai-signal-validator.js
 * Copyright (c) 2024-2026 SHDWXBT. All rights reserved.
 * 
 * PROPRIETARY AND CONFIDENTIAL
 * Unauthorized copying, modification, distribution, or use is strictly prohibited.
 * This code is protected by intellectual property laws.
 * 
 * Build: 2026-01-28T12:08:08.787Z
 * Checksum: SHDW-55E66CD7
 */
const a0_0x3a359a=a0_0xc521;function a0_0xc521(_0x3a327a,_0xfc2ff0){_0x3a327a=_0x3a327a-0x1ed;const _0x262167=a0_0x2621();let _0xc52124=_0x262167[_0x3a327a];return _0xc52124;}function a0_0x2621(){const _0x1aaf5a=['sort','acceptable','length','neutral','fibonacci','‚ùå\x20Sinal\x20rejeitado\x20-\x20n√£o\x20recomendado','count','period','low','pow','N√≠vel\x20','log',':1)','Sem\x20diverg√™ncia','winRate','statistics','Indicadores\x20de\x20falso\x20sinal\x20detectados','Alvos\x20definidos','falseSignalIndicators','fairValueGaps','direction','config','stopLoss','WR:\x20','generateRecommendations','name','now','562114XigHph','calculateConfidence','inZone','üî¨\x20Testando\x20robustez:\x20','nearLevel','rsi','runQuickBacktest','validateRiskReward','Conflu√™ncias\x20insuficientes:\x20','weight','Erro\x20na\x20valida√ß√£o:','quickBacktest','calculateBacktestStatistics','AISignalValidator','quality','FVG\x20presente','down','Hist√≥rico\x20de\x20Padr√µes','orderBlocks','warnings','backtestSupport','slice','min','backtestResults','round','Score\x20M√≠nimo','priceSpike','excellent','message','entry','price','max','\x20(m√≠n:\x20','576GaCWyI','validation','‚úÖ\x20Setup\x20v√°lido\x20-\x20posi√ß√£o\x20normal','varyStrategyParams','patterns','makeValidationDecision','calculateWFStatistics','confluences','checkBasicCriteria','üéØ\x20AI\x20Signal\x20Validator\x20pronto\x20para\x20uso','Sinal\x20contra\x20a\x20tend√™ncia\x20maior','matchHistoricalPatterns','breakOfStructure','R:R\x20','üìä\x20Iniciando\x20backtest:\x20','REJEITADO','üöÄ\x20Setup\x20de\x20alta\x20qualidade\x20-\x20posi√ß√£o\x20completa\x20recomendada','poor','bias','forEach','symbol','value','‚ö†Ô∏è\x20Setup\x20aceit√°vel\x20-\x20considere\x20posi√ß√£o\x20reduzida',':1\x20(m√≠n:\x20','drawdown','initialCapital','No\x20trades','Stop\x20em\x20','rejectedSignals','Stop\x20loss\x20n√£o\x20definido','\x20BOS','take_profit','smartMoney','recommendations','marketStructure','reason','Alinhamento\x20de\x20Tend√™ncia','targets','calculateWFEfficiency','minConfluences','quantity','criterion','Risk/Reward','bearish','\x20-\x20Score:\x20','type','high','generateSignal','Sem\x20hist√≥rico\x20similar','state','exit','Estrutura\x20','MTF\x20Alignment','Pre√ßo\x20na\x20zona\x20OTE','2343904ipRhpd','minScore','‚úÖ\x20Backtest\x20completo:\x20','toFixed','abs','good','Fair\x20Value\x20Gap','2cNoJXB','validateVolume','setDate','equity','getDate','minVolume','31848ZIaXHc','Diverg√™ncia','ratio','level','Score:\x20','netProfit','score','1056110lnKCbE','APROVADO','finalCapital','pnlPercent','slippage','filter','183792JwzqJZ','Alinhado\x20com\x20tend√™ncia\x20maior','checkExitConditions','stats','Order\x20Block','efficiency','calculateValidationScore','fetchHistoricalData','\x20trades,\x20PF:\x20','requireTrendAlignment','confidence','floor','divergence','long','toISOString','backtest','Sem\x20spike','calculatePnL','pnl','random','isFalse','criteria','entryBar','Volume','outSample','Spike:\x20','1212243HzMhtN','minRiskReward','map','determineQuality','calculateSharpeRatio','sqrt','entries','calculatePositionValue','volumeAnomaly','commission','Stop\x20Loss','x\x20m√©dia','bullish','overall','passed','üìà\x20Walk-Forward\x20Analysis:\x20','reduce','\x20-\x20','profitFactor','end_of_backtest','bars','stop_loss','runFullBacktest','‚ö†Ô∏è\x20','Dados\x20hist√≥ricos\x20insuficientes','time','params','Campos\x20Obrigat√≥rios','Spike\x20de\x20Pre√ßo','Diverg√™ncia\x20Bearish','N√£o\x20foi\x20poss√≠vel\x20calcular\x20R:R','momentum','Volume\x20','%,\x20PF:\x20','exitReason','Padr√µes','short','411147OMcBhn','threshold','mtfAlignment','valid','found','volume','trades','set','validatedSignals','Break\x20of\x20Structure','Crit√©rios\x20b√°sicos\x20n√£o\x20atendidos','returnPercent','error','getTopRejectionReasons','push','close','Take\x20Profit','x\x20(m√≠n:\x20','ceil','aligned','takeProfit'];a0_0x2621=function(){return _0x1aaf5a;};return a0_0x2621();}(function(_0x27dbd6,_0x443571){const _0x20e2ed=a0_0xc521,_0x19ed1c=_0x27dbd6();while(!![]){try{const _0x13930b=parseInt(_0x20e2ed(0x1fb))/0x1+parseInt(_0x20e2ed(0x289))/0x2*(parseInt(_0x20e2ed(0x2b6))/0x3)+-parseInt(_0x20e2ed(0x282))/0x4+parseInt(_0x20e2ed(0x296))/0x5+parseInt(_0x20e2ed(0x29c))/0x6+parseInt(_0x20e2ed(0x22b))/0x7+parseInt(_0x20e2ed(0x28f))/0x8*(-parseInt(_0x20e2ed(0x24c))/0x9);if(_0x13930b===_0x443571)break;else _0x19ed1c['push'](_0x19ed1c['shift']());}catch(_0x2c361a){_0x19ed1c['push'](_0x19ed1c['shift']());}}}(a0_0x2621,0x486b0));const AISignalValidator={'config':{'validation':{'minConfluences':0x4,'minScore':0x41,'minRiskReward':2.5,'maxSpread':0.002,'minVolume':1.5,'requireTrendAlignment':!![],'requireStructureConfirm':!![]},'backtest':{'defaultPeriod':0x5a,'minTrades':0x1e,'walkForwardRatio':0.7,'commission':0.0004,'slippage':0.0002,'reinvestProfits':![]},'quality':{'excellent':{'score':0x55,'winRate':0.7,'profitFactor':2.5},'good':{'score':0x4b,'winRate':0.6,'profitFactor':0x2},'acceptable':{'score':0x41,'winRate':0.55,'profitFactor':1.5},'poor':{'score':0x32,'winRate':0.45,'profitFactor':1.2}},'falseSignalIndicators':{'divergence':!![],'volumeAnomaly':!![],'priceSpike':!![],'newsImpact':![],'correlationBreak':!![]}},'state':{'validatedSignals':[],'rejectedSignals':[],'backtestResults':new Map(),'patternDatabase':[],'signalHistory':[],'realtimeValidation':new Map()},async 'validateSignal'(_0xd89c6c){const _0x1b388a=a0_0xc521;console[_0x1b388a(0x21b)]('üîç\x20Validando\x20sinal:\x20'+_0xd89c6c[_0x1b388a(0x260)]+'\x20['+_0xd89c6c[_0x1b388a(0x224)]+']');const _0x3d04a8={'signal':_0xd89c6c,'timestamp':Date[_0x1b388a(0x22a)](),'valid':![],'score':0x0,'quality':_0x1b388a(0x25d),'criteria':[],'warnings':[],'recommendations':[],'confidence':0x0,'backtestSupport':null};try{const _0x5eb1d3=this[_0x1b388a(0x254)](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](..._0x5eb1d3['criteria']);if(!_0x5eb1d3[_0x1b388a(0x2c4)])return _0x3d04a8[_0x1b388a(0x23e)][_0x1b388a(0x209)](_0x1b388a(0x205)),_0x3d04a8;const _0x28eb66=this['validateConfluences'](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](..._0x28eb66[_0x1b388a(0x2b1)]);_0x28eb66[_0x1b388a(0x216)]<this[_0x1b388a(0x225)]['validation'][_0x1b388a(0x273)]&&_0x3d04a8[_0x1b388a(0x23e)][_0x1b388a(0x209)](_0x1b388a(0x233)+_0x28eb66[_0x1b388a(0x216)]+'/'+this[_0x1b388a(0x225)]['validation']['minConfluences']);const _0x1000a7=this[_0x1b388a(0x232)](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](_0x1000a7[_0x1b388a(0x275)]);!_0x1000a7[_0x1b388a(0x2c4)]&&_0x3d04a8[_0x1b388a(0x23e)][_0x1b388a(0x209)]('R:R\x20insuficiente:\x20'+_0x1000a7[_0x1b388a(0x291)]+':1');const _0x30a146=await this[_0x1b388a(0x28a)](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](_0x30a146[_0x1b388a(0x275)]);const _0x24f633=await this['validateTrendAlignment'](_0xd89c6c);_0x3d04a8['criteria'][_0x1b388a(0x209)](_0x24f633['criterion']);!_0x24f633[_0x1b388a(0x20e)]&&this[_0x1b388a(0x225)][_0x1b388a(0x24d)][_0x1b388a(0x2a5)]&&_0x3d04a8['warnings'][_0x1b388a(0x209)](_0x1b388a(0x256));const _0x57961c=await this['validateMarketStructure'](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](_0x57961c['criterion']);const _0x3a49bc=await this['detectFalseSignal'](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](..._0x3a49bc[_0x1b388a(0x2b1)]);_0x3a49bc[_0x1b388a(0x2b0)]&&_0x3d04a8[_0x1b388a(0x23e)][_0x1b388a(0x209)](_0x1b388a(0x220));const _0x5f02b5=await this[_0x1b388a(0x257)](_0xd89c6c);_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](_0x5f02b5[_0x1b388a(0x275)]);const _0x8a3e1e=await this[_0x1b388a(0x236)](_0xd89c6c);return _0x3d04a8['backtestSupport']=_0x8a3e1e,_0x3d04a8[_0x1b388a(0x2b1)][_0x1b388a(0x209)](_0x8a3e1e['criterion']),_0x3d04a8[_0x1b388a(0x295)]=this[_0x1b388a(0x2a2)](_0x3d04a8[_0x1b388a(0x2b1)]),_0x3d04a8['quality']=this[_0x1b388a(0x2b9)](_0x3d04a8['score'],_0x8a3e1e),_0x3d04a8['confidence']=this[_0x1b388a(0x22c)](_0x3d04a8),_0x3d04a8['valid']=this[_0x1b388a(0x251)](_0x3d04a8),_0x3d04a8[_0x1b388a(0x26d)]=this[_0x1b388a(0x228)](_0x3d04a8),_0x3d04a8['valid']?this['state']['validatedSignals'][_0x1b388a(0x209)](_0x3d04a8):this[_0x1b388a(0x27d)][_0x1b388a(0x268)]['push'](_0x3d04a8),console[_0x1b388a(0x21b)]('‚úÖ\x20Valida√ß√£o:\x20'+(_0x3d04a8[_0x1b388a(0x1fe)]?_0x1b388a(0x297):_0x1b388a(0x25b))+_0x1b388a(0x278)+_0x3d04a8['score']),_0x3d04a8;}catch(_0x2eb7b1){return console[_0x1b388a(0x207)](_0x1b388a(0x235),_0x2eb7b1),_0x3d04a8[_0x1b388a(0x23e)][_0x1b388a(0x209)]('Erro:\x20'+_0x2eb7b1[_0x1b388a(0x247)]),_0x3d04a8;}},'checkBasicCriteria'(_0x58f9de){const _0x109d09=a0_0xc521,_0x48324f=[];let _0x5ebcaf=!![];!_0x58f9de['symbol']||!_0x58f9de[_0x109d09(0x224)]||!_0x58f9de[_0x109d09(0x248)]?(_0x48324f['push']({'name':_0x109d09(0x1f1),'passed':![],'weight':0x1,'details':'Symbol,\x20direction\x20ou\x20entry\x20ausente'}),_0x5ebcaf=![]):_0x48324f['push']({'name':_0x109d09(0x1f1),'passed':!![],'weight':0x1,'details':'Todos\x20os\x20campos\x20presentes'});!_0x58f9de[_0x109d09(0x226)]?(_0x48324f[_0x109d09(0x209)]({'name':_0x109d09(0x2c0),'passed':![],'weight':0x2,'details':_0x109d09(0x269)}),_0x5ebcaf=![]):_0x48324f[_0x109d09(0x209)]({'name':_0x109d09(0x2c0),'passed':!![],'weight':0x2,'details':_0x109d09(0x267)+_0x58f9de['stopLoss']});!_0x58f9de['takeProfit']&&!_0x58f9de[_0x109d09(0x271)]?_0x48324f[_0x109d09(0x209)]({'name':_0x109d09(0x20b),'passed':![],'weight':0x1,'details':'Alvos\x20n√£o\x20definidos'}):_0x48324f[_0x109d09(0x209)]({'name':'Take\x20Profit','passed':!![],'weight':0x1,'details':_0x109d09(0x221)});if(_0x58f9de[_0x109d09(0x295)]!==undefined){const _0x3ffb42=_0x58f9de[_0x109d09(0x295)]>=this[_0x109d09(0x225)][_0x109d09(0x24d)][_0x109d09(0x283)];_0x48324f['push']({'name':_0x109d09(0x244),'passed':_0x3ffb42,'weight':0x3,'details':_0x109d09(0x293)+_0x58f9de[_0x109d09(0x295)]+_0x109d09(0x24b)+this['config'][_0x109d09(0x24d)][_0x109d09(0x283)]+')'});if(!_0x3ffb42)_0x5ebcaf=![];}return{'passed':_0x5ebcaf,'criteria':_0x48324f};},'validateConfluences'(_0x244610){const _0x4d647a=a0_0xc521,_0x4c66e0=_0x244610[_0x4d647a(0x253)]||[],_0x174a95=[];let _0x185386=0x0;return _0x244610[_0x4d647a(0x1fd)]&&_0x244610['mtfAlignment']>=0.7&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':_0x4d647a(0x280),'passed':!![],'weight':0x3,'details':Math[_0x4d647a(0x243)](_0x244610[_0x4d647a(0x1fd)]*0x64)+'%\x20alinhado'})),_0x244610[_0x4d647a(0x26c)]&&(_0x244610[_0x4d647a(0x26c)][_0x4d647a(0x23d)]?.[_0x4d647a(0x212)]>0x0&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':_0x4d647a(0x2a0),'passed':!![],'weight':0x2,'details':_0x244610[_0x4d647a(0x26c)][_0x4d647a(0x23d)][_0x4d647a(0x212)]+'\x20OB\x20identificado(s)'})),_0x244610['smartMoney'][_0x4d647a(0x223)]?.[_0x4d647a(0x212)]>0x0&&(_0x185386++,_0x174a95['push']({'name':_0x4d647a(0x288),'passed':!![],'weight':0x2,'details':_0x4d647a(0x23a)})),_0x244610['smartMoney']['optimalTradeEntry']?.[_0x4d647a(0x22d)]&&(_0x185386++,_0x174a95['push']({'name':'OTE\x20Zone','passed':!![],'weight':0x2,'details':_0x4d647a(0x281)}))),_0x244610['marketStructure']&&(_0x244610[_0x4d647a(0x26e)][_0x4d647a(0x258)]?.[_0x4d647a(0x212)]>0x0&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':_0x4d647a(0x204),'passed':!![],'weight':0x3,'details':_0x244610['marketStructure'][_0x4d647a(0x258)]['length']+_0x4d647a(0x26a)}))),_0x244610[_0x4d647a(0x214)]&&_0x244610[_0x4d647a(0x214)][_0x4d647a(0x22f)]&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':'Fibonacci','passed':!![],'weight':0x2,'details':_0x4d647a(0x21a)+_0x244610[_0x4d647a(0x214)][_0x4d647a(0x292)]})),_0x244610[_0x4d647a(0x200)]&&_0x244610['volume'][_0x4d647a(0x291)]>1.5&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':_0x4d647a(0x2b3),'passed':!![],'weight':0x2,'details':_0x244610[_0x4d647a(0x200)][_0x4d647a(0x291)][_0x4d647a(0x285)](0x1)+_0x4d647a(0x2c1)})),_0x244610[_0x4d647a(0x250)]&&_0x244610[_0x4d647a(0x250)][_0x4d647a(0x212)]>0x0&&(_0x185386++,_0x174a95[_0x4d647a(0x209)]({'name':_0x4d647a(0x1f9),'passed':!![],'weight':0x2,'details':_0x244610[_0x4d647a(0x250)]['join'](',\x20')})),{'count':_0x185386,'criteria':_0x174a95};},'validateRiskReward'(_0x29e721){const _0x1a2271=a0_0xc521,_0x2f43d8=_0x29e721[_0x1a2271(0x248)],_0x268024=_0x29e721['stopLoss'],_0x3607e1=_0x29e721['takeProfit']||_0x29e721['targets']&&_0x29e721[_0x1a2271(0x271)][0x0]?.[_0x1a2271(0x249)];if(!_0x2f43d8||!_0x268024||!_0x3607e1)return{'passed':![],'ratio':0x0,'criterion':{'name':_0x1a2271(0x276),'passed':![],'weight':0x4,'details':_0x1a2271(0x1f4)}};const _0x27b1fa=Math['abs'](_0x2f43d8-_0x268024),_0xb57896=Math[_0x1a2271(0x286)](_0x3607e1-_0x2f43d8),_0x236558=_0xb57896/_0x27b1fa,_0x445e12=_0x236558>=this[_0x1a2271(0x225)][_0x1a2271(0x24d)][_0x1a2271(0x2b7)];return{'passed':_0x445e12,'ratio':Math['round'](_0x236558*0x64)/0x64,'criterion':{'name':_0x1a2271(0x276),'passed':_0x445e12,'weight':0x4,'details':_0x1a2271(0x259)+_0x236558[_0x1a2271(0x285)](0x2)+_0x1a2271(0x263)+this['config']['validation']['minRiskReward']+_0x1a2271(0x21c)}};},async 'validateVolume'(_0xc04b53){const _0x4c9ded=a0_0xc521,_0x4f81e9=_0xc04b53[_0x4c9ded(0x200)]?.['ratio']||0x1,_0x3c2809=_0x4f81e9>=this[_0x4c9ded(0x225)][_0x4c9ded(0x24d)][_0x4c9ded(0x28e)];return{'passed':_0x3c2809,'criterion':{'name':'Volume','passed':_0x3c2809,'weight':0x2,'details':_0x4c9ded(0x1f6)+_0x4f81e9[_0x4c9ded(0x285)](0x2)+_0x4c9ded(0x20c)+this[_0x4c9ded(0x225)][_0x4c9ded(0x24d)][_0x4c9ded(0x28e)]+'x)'}};},async 'validateTrendAlignment'(_0x1b5db8){const _0x8d1ff4=a0_0xc521;let _0x4873fc=!![],_0x197b01=_0x8d1ff4(0x29d);return _0x1b5db8[_0x8d1ff4(0x25e)]&&(_0x4873fc=_0x1b5db8['direction']===_0x8d1ff4(0x2a9)&&_0x1b5db8[_0x8d1ff4(0x25e)]===_0x8d1ff4(0x2c2)||_0x1b5db8[_0x8d1ff4(0x224)]===_0x8d1ff4(0x1fa)&&_0x1b5db8[_0x8d1ff4(0x25e)]===_0x8d1ff4(0x277),!_0x4873fc&&(_0x197b01='Contra\x20tend√™ncia:\x20'+_0x1b5db8['bias'])),{'aligned':_0x4873fc,'criterion':{'name':_0x8d1ff4(0x270),'passed':_0x4873fc,'weight':0x3,'details':_0x197b01}};},async 'validateMarketStructure'(_0x38500c){const _0x10bd75=a0_0xc521,_0x20b7d3=_0x38500c[_0x10bd75(0x26e)]&&(_0x38500c[_0x10bd75(0x26e)][_0x10bd75(0x2c3)]!==_0x10bd75(0x213)||_0x38500c[_0x10bd75(0x26e)]['breakOfStructure']?.[_0x10bd75(0x212)]>0x0),_0x14959e=_0x38500c['marketStructure']?.[_0x10bd75(0x2c3)]===(_0x38500c[_0x10bd75(0x224)]===_0x10bd75(0x2a9)?_0x10bd75(0x2c2):_0x10bd75(0x277));return{'confirmed':_0x20b7d3&&_0x14959e,'criterion':{'name':'Estrutura\x20de\x20Mercado','passed':_0x20b7d3&&_0x14959e,'weight':0x3,'details':_0x20b7d3?_0x10bd75(0x27f)+_0x38500c[_0x10bd75(0x26e)][_0x10bd75(0x2c3)]:'Sem\x20confirma√ß√£o\x20estrutural'}};},async 'detectFalseSignal'(_0x2fac4a){const _0x4498df=a0_0xc521,_0xd7e877=[];let _0x2f3f78=![];if(this[_0x4498df(0x225)]['falseSignalIndicators'][_0x4498df(0x2a8)]){const _0x2b850a=this['checkDivergence'](_0x2fac4a);_0x2b850a[_0x4498df(0x1ff)]?(_0xd7e877['push']({'name':_0x4498df(0x290),'passed':![],'weight':0x2,'details':_0x2b850a[_0x4498df(0x279)]}),_0x2f3f78=!![]):_0xd7e877['push']({'name':_0x4498df(0x290),'passed':!![],'weight':0x2,'details':_0x4498df(0x21d)});}if(this[_0x4498df(0x225)]['falseSignalIndicators'][_0x4498df(0x2be)]){const _0x17b696=_0x2fac4a[_0x4498df(0x200)]?.['ratio']||0x1,_0x26e459=_0x17b696>0x5||_0x17b696<0.3;_0xd7e877[_0x4498df(0x209)]({'name':'Anomalia\x20de\x20Volume','passed':!_0x26e459,'weight':0x1,'details':_0x26e459?'Volume\x20anormal:\x20'+_0x17b696[_0x4498df(0x285)](0x1)+'x':'Volume\x20normal'});if(_0x26e459)_0x2f3f78=!![];}if(this[_0x4498df(0x225)][_0x4498df(0x222)][_0x4498df(0x245)]){const _0x398b4a=_0x2fac4a['priceChange']||0x0,_0x2e26f2=Math[_0x4498df(0x286)](_0x398b4a)>0.05;_0xd7e877[_0x4498df(0x209)]({'name':_0x4498df(0x1f2),'passed':!_0x2e26f2,'weight':0x1,'details':_0x2e26f2?_0x4498df(0x2b5)+(_0x398b4a*0x64)[_0x4498df(0x285)](0x1)+'%':_0x4498df(0x2ac)});}return{'isFalse':_0x2f3f78,'criteria':_0xd7e877};},'checkDivergence'(_0xfe59b4){const _0x7efe24=a0_0xc521;if(!_0xfe59b4['momentum']?.[_0x7efe24(0x230)]||!_0xfe59b4[_0x7efe24(0x249)])return{'found':![]};const _0x3c05d5=_0xfe59b4[_0x7efe24(0x1f5)]['rsiSlope']>0x0?'up':_0x7efe24(0x23b),_0x33a5cf=_0xfe59b4['direction']===_0x7efe24(0x2a9)?'up':_0x7efe24(0x23b);if(_0x33a5cf==='up'&&_0x3c05d5===_0x7efe24(0x23b))return{'found':!![],'type':_0x7efe24(0x1f3)};if(_0x33a5cf==='down'&&_0x3c05d5==='up')return{'found':!![],'type':'Diverg√™ncia\x20Bullish'};return{'found':![]};},async 'matchHistoricalPatterns'(_0x2d5172){const _0x9cf33f=a0_0xc521,_0x245b04=this['findSimilarSetups'](_0x2d5172);if(_0x245b04[_0x9cf33f(0x212)]===0x0)return{'matched':![],'criterion':{'name':'Hist√≥rico\x20de\x20Padr√µes','passed':!![],'weight':0x1,'details':_0x9cf33f(0x27c)}};const _0x37d49e=_0x245b04[_0x9cf33f(0x29b)](_0xd5e95d=>_0xd5e95d['profitable'])['length']/_0x245b04[_0x9cf33f(0x212)],_0xa6e563=_0x37d49e>=0.5;return{'matched':!![],'similarCount':_0x245b04[_0x9cf33f(0x212)],'winRate':_0x37d49e,'criterion':{'name':_0x9cf33f(0x23c),'passed':_0xa6e563,'weight':0x2,'details':_0x245b04[_0x9cf33f(0x212)]+'\x20similares,\x20WR:\x20'+(_0x37d49e*0x64)[_0x9cf33f(0x285)](0x0)+'%'}};},'findSimilarSetups'(_0x1d7f5a){const _0x166841=a0_0xc521;return this['state']['patternDatabase'][_0x166841(0x29b)](_0x4c3cad=>_0x4c3cad['symbol']===_0x1d7f5a['symbol']&&_0x4c3cad[_0x166841(0x224)]===_0x1d7f5a[_0x166841(0x224)]&&Math[_0x166841(0x286)](_0x4c3cad[_0x166841(0x295)]-(_0x1d7f5a[_0x166841(0x295)]||0x0))<0xf)[_0x166841(0x240)](0x0,0x14);},async 'quickBacktest'(_0x50c96f){const _0x82ae97=a0_0xc521,_0x5ebb85=await this[_0x82ae97(0x231)](_0x50c96f),_0x2fd626=_0x5ebb85['winRate']>=0.55&&_0x5ebb85[_0x82ae97(0x2c8)]>=1.5;return{'winRate':_0x5ebb85[_0x82ae97(0x21e)],'profitFactor':_0x5ebb85[_0x82ae97(0x2c8)],'trades':_0x5ebb85[_0x82ae97(0x201)],'criterion':{'name':'Backtest\x20R√°pido','passed':_0x2fd626,'weight':0x3,'details':_0x82ae97(0x227)+(_0x5ebb85['winRate']*0x64)[_0x82ae97(0x285)](0x0)+_0x82ae97(0x1f7)+_0x5ebb85[_0x82ae97(0x2c8)][_0x82ae97(0x285)](0x2)}};},async 'runQuickBacktest'(_0x5e3b56){const _0x32d05b=a0_0xc521;return{'winRate':0.58+Math['random']()*0.15,'profitFactor':1.7+Math[_0x32d05b(0x2af)]()*0.8,'trades':0x19+Math[_0x32d05b(0x2a7)](Math['random']()*0x1e)};},'calculateValidationScore'(_0x469c7e){const _0x59f8cd=a0_0xc521;let _0xf8cea=0x0,_0x599646=0x0;return _0x469c7e[_0x59f8cd(0x25f)](_0x101052=>{const _0x5256ec=_0x59f8cd;_0xf8cea+=_0x101052[_0x5256ec(0x234)],_0x101052[_0x5256ec(0x2c4)]&&(_0x599646+=_0x101052[_0x5256ec(0x234)]);}),Math[_0x59f8cd(0x243)](_0x599646/_0xf8cea*0x64);},'determineQuality'(_0x20f5b7,_0x8c1392){const _0x357954=a0_0xc521;if(_0x20f5b7>=this['config'][_0x357954(0x239)][_0x357954(0x246)][_0x357954(0x295)]&&_0x8c1392[_0x357954(0x21e)]>=this[_0x357954(0x225)][_0x357954(0x239)][_0x357954(0x246)]['winRate'])return _0x357954(0x246);if(_0x20f5b7>=this[_0x357954(0x225)][_0x357954(0x239)][_0x357954(0x287)]['score']&&_0x8c1392[_0x357954(0x21e)]>=this['config'][_0x357954(0x239)][_0x357954(0x287)][_0x357954(0x21e)])return'good';if(_0x20f5b7>=this[_0x357954(0x225)][_0x357954(0x239)]['acceptable'][_0x357954(0x295)])return _0x357954(0x211);return'poor';},'calculateConfidence'(_0x146097){const _0x2d8911=a0_0xc521;let _0x325049=_0x146097[_0x2d8911(0x295)];return _0x325049-=_0x146097[_0x2d8911(0x23e)][_0x2d8911(0x212)]*0x5,_0x146097[_0x2d8911(0x23f)]?.[_0x2d8911(0x21e)]&&(_0x325049+=(_0x146097[_0x2d8911(0x23f)][_0x2d8911(0x21e)]-0.5)*0x14),Math[_0x2d8911(0x24a)](0x0,Math[_0x2d8911(0x241)](0x64,Math[_0x2d8911(0x243)](_0x325049)));},'makeValidationDecision'(_0x456a05){const _0x804a30=a0_0xc521;if(_0x456a05['score']<this['config'][_0x804a30(0x24d)][_0x804a30(0x283)])return![];if(_0x456a05['quality']==='poor')return![];if(_0x456a05['warnings'][_0x804a30(0x212)]>0x3)return![];return!![];},'generateRecommendations'(_0x56a028){const _0x2f99eb=a0_0xc521,_0x4a8ab4=[];if(_0x56a028[_0x2f99eb(0x1fe)]){if(_0x56a028[_0x2f99eb(0x239)]===_0x2f99eb(0x246))_0x4a8ab4[_0x2f99eb(0x209)](_0x2f99eb(0x25c));else _0x56a028['quality']===_0x2f99eb(0x287)?_0x4a8ab4[_0x2f99eb(0x209)](_0x2f99eb(0x24e)):_0x4a8ab4[_0x2f99eb(0x209)](_0x2f99eb(0x262));_0x56a028[_0x2f99eb(0x23f)]?.['winRate']>0.65&&_0x4a8ab4['push']('üìä\x20Backtest\x20favor√°vel\x20-\x20setup\x20consistente\x20historicamente');}else _0x4a8ab4[_0x2f99eb(0x209)](_0x2f99eb(0x215)),_0x56a028['warnings']['forEach'](_0x7d9a1d=>{const _0x48eb9b=_0x2f99eb;_0x4a8ab4[_0x48eb9b(0x209)](_0x48eb9b(0x1ed)+_0x7d9a1d);});return _0x4a8ab4;},async 'runFullBacktest'(_0x4b08df){const _0x35929d=a0_0xc521,{symbol:_0x1f39ec,strategy:_0x4322be,startDate:_0x2f7764,endDate:_0x5e1ed7,initialCapital:initialCapital=0x2710,riskPerTrade:riskPerTrade=0.01}=_0x4b08df;console['log'](_0x35929d(0x25a)+_0x1f39ec+_0x35929d(0x2c7)+_0x4322be['name']);const _0x8e66cc={'symbol':_0x1f39ec,'strategy':_0x4322be[_0x35929d(0x229)],'period':{'start':_0x2f7764,'end':_0x5e1ed7},'initialCapital':initialCapital,'finalCapital':initialCapital,'trades':[],'statistics':{},'equity':[],'drawdown':[]};try{const _0x581e5e=await this[_0x35929d(0x2a3)](_0x1f39ec,_0x2f7764,_0x5e1ed7);if(!_0x581e5e||_0x581e5e[_0x35929d(0x212)]<0x64)return{'error':_0x35929d(0x1ee)};let _0x14e69d=initialCapital,_0x581cd4=initialCapital,_0x1063d4=null;for(let _0x25b523=0x64;_0x25b523<_0x581e5e[_0x35929d(0x212)];_0x25b523++){const _0x4338f7=_0x581e5e[_0x25b523],_0x2ba71a=_0x581e5e[_0x35929d(0x240)](0x0,_0x25b523+0x1),_0x1fc298=_0x1063d4?this[_0x35929d(0x2bd)](_0x1063d4,_0x4338f7[_0x35929d(0x20a)])+(_0x14e69d-_0x1063d4['value']):_0x14e69d;_0x8e66cc[_0x35929d(0x28c)][_0x35929d(0x209)]({'time':_0x4338f7[_0x35929d(0x1ef)],'value':_0x1fc298});if(_0x1fc298>_0x581cd4)_0x581cd4=_0x1fc298;const _0x20023f=(_0x581cd4-_0x1fc298)/_0x581cd4;_0x8e66cc[_0x35929d(0x264)][_0x35929d(0x209)]({'time':_0x4338f7['time'],'value':_0x20023f});if(_0x1063d4){const _0x3429bc=this[_0x35929d(0x29e)](_0x1063d4,_0x4338f7,_0x4322be);if(_0x3429bc[_0x35929d(0x27e)]){const _0x24037b=this[_0x35929d(0x2ad)](_0x1063d4,_0x3429bc[_0x35929d(0x249)]);_0x14e69d+=_0x24037b,_0x8e66cc[_0x35929d(0x201)][_0x35929d(0x209)]({..._0x1063d4,'exitTime':_0x4338f7[_0x35929d(0x1ef)],'exitPrice':_0x3429bc['price'],'exitReason':_0x3429bc[_0x35929d(0x26f)],'pnl':_0x24037b,'pnlPercent':_0x24037b/_0x1063d4[_0x35929d(0x261)]*0x64,'bars':_0x25b523-_0x1063d4[_0x35929d(0x2b2)]}),_0x1063d4=null;}}if(!_0x1063d4){const _0x1d8f57=_0x4322be[_0x35929d(0x27b)](_0x2ba71a);if(_0x1d8f57&&_0x1d8f57['direction']!==_0x35929d(0x213)){const _0x13e637=_0x14e69d*riskPerTrade,_0x4e5ab7=Math[_0x35929d(0x286)](_0x1d8f57[_0x35929d(0x248)]-_0x1d8f57[_0x35929d(0x226)]),_0x429c1c=_0x13e637/_0x4e5ab7;_0x1063d4={'symbol':_0x1f39ec,'direction':_0x1d8f57[_0x35929d(0x224)],'entry':_0x1d8f57['entry'],'stopLoss':_0x1d8f57[_0x35929d(0x226)],'takeProfit':_0x1d8f57[_0x35929d(0x20f)],'quantity':_0x429c1c,'value':_0x429c1c*_0x1d8f57[_0x35929d(0x248)],'entryTime':_0x4338f7['time'],'entryBar':_0x25b523};}}}if(_0x1063d4){const _0x51ce0d=_0x581e5e[_0x581e5e['length']-0x1],_0x2cdb69=this[_0x35929d(0x2ad)](_0x1063d4,_0x51ce0d[_0x35929d(0x20a)]);_0x14e69d+=_0x2cdb69,_0x8e66cc['trades'][_0x35929d(0x209)]({..._0x1063d4,'exitTime':_0x51ce0d[_0x35929d(0x1ef)],'exitPrice':_0x51ce0d['close'],'exitReason':_0x35929d(0x2c9),'pnl':_0x2cdb69,'pnlPercent':_0x2cdb69/_0x1063d4[_0x35929d(0x261)]*0x64});}return _0x8e66cc[_0x35929d(0x298)]=_0x14e69d,_0x8e66cc[_0x35929d(0x21f)]=this[_0x35929d(0x237)](_0x8e66cc),this['state'][_0x35929d(0x242)][_0x35929d(0x202)](_0x1f39ec+'-'+_0x4322be[_0x35929d(0x229)],_0x8e66cc),console['log'](_0x35929d(0x284)+_0x8e66cc['trades']['length']+_0x35929d(0x2a4)+_0x8e66cc[_0x35929d(0x21f)][_0x35929d(0x2c8)][_0x35929d(0x285)](0x2)),_0x8e66cc;}catch(_0x56eff3){return console[_0x35929d(0x207)]('Erro\x20no\x20backtest:',_0x56eff3),{'error':_0x56eff3['message']};}},async 'fetchHistoricalData'(_0x2060ae,_0x33001b,_0x11cf16){const _0x4195d0=a0_0xc521,_0x3cfd7a=Math[_0x4195d0(0x20d)]((new Date(_0x11cf16)-new Date(_0x33001b))/(0x3e8*0x3c*0x3c*0x18)),_0x1f34a3=[];let _0x1e6e07=0xc350;for(let _0x1d036e=0x0;_0x1d036e<_0x3cfd7a*0x18;_0x1d036e++){const _0xbff8e9=(Math[_0x4195d0(0x2af)]()-0.5)*0.02;_0x1e6e07*=0x1+_0xbff8e9,_0x1f34a3[_0x4195d0(0x209)]({'time':new Date(_0x33001b)['getTime']()+_0x1d036e*0x36ee80,'open':_0x1e6e07*(0x1-Math[_0x4195d0(0x2af)]()*0.005),'high':_0x1e6e07*(0x1+Math[_0x4195d0(0x2af)]()*0.01),'low':_0x1e6e07*(0x1-Math['random']()*0.01),'close':_0x1e6e07,'volume':0xf4240+Math['random']()*0x7a120});}return _0x1f34a3;},'calculatePositionValue'(_0x49a049,_0x5d5457){const _0x4edd4b=a0_0xc521,_0xf765c6=_0x49a049[_0x4edd4b(0x224)]===_0x4edd4b(0x2a9)?(_0x5d5457-_0x49a049[_0x4edd4b(0x248)])*_0x49a049[_0x4edd4b(0x274)]:(_0x49a049[_0x4edd4b(0x248)]-_0x5d5457)*_0x49a049[_0x4edd4b(0x274)];return _0x49a049[_0x4edd4b(0x261)]+_0xf765c6;},'checkExitConditions'(_0xf01098,_0x21a77a,_0x525f84){const _0x140746=a0_0xc521;if(_0xf01098['direction']===_0x140746(0x2a9)&&_0x21a77a[_0x140746(0x218)]<=_0xf01098[_0x140746(0x226)])return{'exit':!![],'price':_0xf01098[_0x140746(0x226)],'reason':_0x140746(0x2cb)};if(_0xf01098[_0x140746(0x224)]===_0x140746(0x1fa)&&_0x21a77a[_0x140746(0x27a)]>=_0xf01098[_0x140746(0x226)])return{'exit':!![],'price':_0xf01098[_0x140746(0x226)],'reason':'stop_loss'};if(_0xf01098[_0x140746(0x20f)]){if(_0xf01098[_0x140746(0x224)]==='long'&&_0x21a77a[_0x140746(0x27a)]>=_0xf01098[_0x140746(0x20f)])return{'exit':!![],'price':_0xf01098[_0x140746(0x20f)],'reason':_0x140746(0x26b)};if(_0xf01098[_0x140746(0x224)]===_0x140746(0x1fa)&&_0x21a77a[_0x140746(0x218)]<=_0xf01098[_0x140746(0x20f)])return{'exit':!![],'price':_0xf01098['takeProfit'],'reason':_0x140746(0x26b)};}return{'exit':![]};},'calculatePnL'(_0x310d63,_0x32cc88){const _0x1de432=a0_0xc521,_0x3dcb42=_0x310d63[_0x1de432(0x224)]===_0x1de432(0x2a9)?(_0x32cc88-_0x310d63[_0x1de432(0x248)])*_0x310d63[_0x1de432(0x274)]:(_0x310d63[_0x1de432(0x248)]-_0x32cc88)*_0x310d63[_0x1de432(0x274)],_0x628ceb=_0x310d63[_0x1de432(0x261)]*this[_0x1de432(0x225)][_0x1de432(0x2ab)][_0x1de432(0x2bf)]*0x2,_0x1b3013=_0x310d63[_0x1de432(0x261)]*this[_0x1de432(0x225)]['backtest'][_0x1de432(0x29a)]*0x2;return _0x3dcb42-_0x628ceb-_0x1b3013;},'calculateBacktestStatistics'(_0x21b43a){const _0x430763=a0_0xc521,_0x4cc2b6=_0x21b43a[_0x430763(0x201)];if(_0x4cc2b6['length']===0x0)return{'error':_0x430763(0x266)};const _0xc09ec1=_0x4cc2b6[_0x430763(0x29b)](_0x246da7=>_0x246da7[_0x430763(0x2ae)]>0x0),_0x8fea1d=_0x4cc2b6['filter'](_0x4f339d=>_0x4f339d[_0x430763(0x2ae)]<=0x0),_0x59d7d8=_0xc09ec1[_0x430763(0x2c6)]((_0x3b410f,_0x2909dd)=>_0x3b410f+_0x2909dd['pnl'],0x0),_0x4b604f=Math[_0x430763(0x286)](_0x8fea1d[_0x430763(0x2c6)]((_0x3c940e,_0x1415c6)=>_0x3c940e+_0x1415c6[_0x430763(0x2ae)],0x0)),_0x551382=_0xc09ec1[_0x430763(0x212)]>0x0?_0x59d7d8/_0xc09ec1[_0x430763(0x212)]:0x0,_0x12efda=_0x8fea1d['length']>0x0?_0x4b604f/_0x8fea1d[_0x430763(0x212)]:0x0,_0x4391fd=Math[_0x430763(0x24a)](..._0x21b43a[_0x430763(0x264)][_0x430763(0x2b8)](_0x4a21e8=>_0x4a21e8[_0x430763(0x261)]));return{'totalTrades':_0x4cc2b6[_0x430763(0x212)],'winners':_0xc09ec1[_0x430763(0x212)],'losers':_0x8fea1d[_0x430763(0x212)],'winRate':_0xc09ec1[_0x430763(0x212)]/_0x4cc2b6[_0x430763(0x212)],'grossProfit':_0x59d7d8,'grossLoss':_0x4b604f,'netProfit':_0x59d7d8-_0x4b604f,'profitFactor':_0x4b604f>0x0?_0x59d7d8/_0x4b604f:_0x59d7d8,'avgWin':_0x551382,'avgLoss':_0x12efda,'avgWinLossRatio':_0x12efda>0x0?_0x551382/_0x12efda:_0x551382,'largestWin':Math[_0x430763(0x24a)](..._0x4cc2b6[_0x430763(0x2b8)](_0xf491b0=>_0xf491b0['pnl'])),'largestLoss':Math['min'](..._0x4cc2b6[_0x430763(0x2b8)](_0x22ff40=>_0x22ff40[_0x430763(0x2ae)])),'avgTrade':(_0x59d7d8-_0x4b604f)/_0x4cc2b6[_0x430763(0x212)],'maxDrawdown':_0x4391fd,'recoveryFactor':_0x4391fd>0x0?(_0x59d7d8-_0x4b604f)/(_0x21b43a[_0x430763(0x265)]*_0x4391fd):0x0,'returnPercent':(_0x21b43a[_0x430763(0x298)]-_0x21b43a[_0x430763(0x265)])/_0x21b43a[_0x430763(0x265)]*0x64,'sharpeRatio':this[_0x430763(0x2ba)](_0x4cc2b6),'avgBarsInTrade':_0x4cc2b6[_0x430763(0x2c6)]((_0x5c86bf,_0x3713b2)=>_0x5c86bf+(_0x3713b2[_0x430763(0x2ca)]||0x0),0x0)/_0x4cc2b6[_0x430763(0x212)]};},'calculateSharpeRatio'(_0x5f2d1e){const _0x449de0=a0_0xc521;if(_0x5f2d1e[_0x449de0(0x212)]<0x2)return 0x0;const _0x2e09aa=_0x5f2d1e[_0x449de0(0x2b8)](_0xe0c201=>_0xe0c201['pnlPercent']),_0x3f9381=_0x2e09aa[_0x449de0(0x2c6)]((_0x1bc788,_0x4e079b)=>_0x1bc788+_0x4e079b,0x0)/_0x2e09aa['length'],_0x25700b=_0x2e09aa[_0x449de0(0x2c6)]((_0x28506e,_0x42c54b)=>_0x28506e+Math[_0x449de0(0x219)](_0x42c54b-_0x3f9381,0x2),0x0)/_0x2e09aa[_0x449de0(0x212)],_0x36b450=Math[_0x449de0(0x2bb)](_0x25700b);return _0x36b450>0x0?_0x3f9381/_0x36b450*Math[_0x449de0(0x2bb)](0xfc):0x0;},async 'runWalkForwardAnalysis'(_0x3e3779){const _0x3df362=a0_0xc521,{symbol:_0x3924fc,strategy:_0x8aad5b,totalPeriod:_0x3038e7,numWindows:numWindows=0x5,initialCapital:initialCapital=0x2710}=_0x3e3779;console['log'](_0x3df362(0x2c5)+_0x3924fc);const _0x2e9014=Math[_0x3df362(0x2a7)](_0x3038e7/numWindows),_0x23facd=Math[_0x3df362(0x2a7)](_0x2e9014*this[_0x3df362(0x225)][_0x3df362(0x2ab)]['walkForwardRatio']),_0x228e73=_0x2e9014-_0x23facd,_0x4f1f4a=[];let _0x3c0ca7=new Date();_0x3c0ca7[_0x3df362(0x28b)](_0x3c0ca7[_0x3df362(0x28d)]()-_0x3038e7);for(let _0x20904c=0x0;_0x20904c<numWindows;_0x20904c++){const _0x1ac011=new Date(_0x3c0ca7),_0x303628=new Date(_0x3c0ca7);_0x303628[_0x3df362(0x28b)](_0x303628[_0x3df362(0x28d)]()+_0x23facd);const _0x3acdd5=new Date(_0x303628),_0x5c7ac2=new Date(_0x3acdd5);_0x5c7ac2['setDate'](_0x5c7ac2[_0x3df362(0x28d)]()+_0x228e73);const _0x31f461=await this[_0x3df362(0x2cc)]({'symbol':_0x3924fc,'strategy':_0x8aad5b,'startDate':_0x1ac011[_0x3df362(0x2aa)](),'endDate':_0x303628['toISOString'](),'initialCapital':initialCapital}),_0x5cd342=await this['runFullBacktest']({'symbol':_0x3924fc,'strategy':_0x8aad5b,'startDate':_0x3acdd5[_0x3df362(0x2aa)](),'endDate':_0x5c7ac2[_0x3df362(0x2aa)](),'initialCapital':initialCapital});_0x4f1f4a[_0x3df362(0x209)]({'window':_0x20904c+0x1,'inSample':{'period':{'start':_0x1ac011,'end':_0x303628},'stats':_0x31f461['statistics']},'outSample':{'period':{'start':_0x3acdd5,'end':_0x5c7ac2},'stats':_0x5cd342[_0x3df362(0x21f)]},'efficiency':this[_0x3df362(0x272)](_0x31f461,_0x5cd342)}),_0x3c0ca7=_0x5c7ac2;}const _0x5a837f=this[_0x3df362(0x252)](_0x4f1f4a);return{'symbol':_0x3924fc,'strategy':_0x8aad5b[_0x3df362(0x229)],'windows':_0x4f1f4a,'overall':_0x5a837f};},'calculateWFEfficiency'(_0x44cf7f,_0x24b27d){const _0x168afb=a0_0xc521;if(!_0x44cf7f[_0x168afb(0x21f)]||!_0x24b27d[_0x168afb(0x21f)])return 0x0;const _0x432690=_0x44cf7f['statistics'][_0x168afb(0x2c8)]||0x0,_0x23e60d=_0x24b27d[_0x168afb(0x21f)][_0x168afb(0x2c8)]||0x0;return _0x432690>0x0?_0x23e60d/_0x432690*0x64:0x0;},'calculateWFStatistics'(_0x1b079a){const _0x384ae7=a0_0xc521,_0x2d46c0=_0x1b079a[_0x384ae7(0x2b8)](_0x21a6f4=>_0x21a6f4[_0x384ae7(0x2a1)]),_0x5f4ece=_0x2d46c0[_0x384ae7(0x2c6)]((_0x4b1e3a,_0x41e9f9)=>_0x4b1e3a+_0x41e9f9,0x0)/_0x2d46c0['length'],_0x5ec3aa=_0x1b079a[_0x384ae7(0x2b8)](_0x5731d2=>_0x5731d2[_0x384ae7(0x2b4)]['stats']?.[_0x384ae7(0x2c8)]||0x0),_0x16d22d=_0x5ec3aa[_0x384ae7(0x2c6)]((_0x23004d,_0x3c762c)=>_0x23004d+_0x3c762c,0x0)/_0x5ec3aa[_0x384ae7(0x212)],_0x2eeb3b=_0x1b079a[_0x384ae7(0x2b8)](_0x37e505=>_0x37e505['outSample'][_0x384ae7(0x29f)]?.[_0x384ae7(0x21e)]||0x0),_0x4ca535=_0x2eeb3b[_0x384ae7(0x2c6)]((_0x317907,_0x3e4e69)=>_0x317907+_0x3e4e69,0x0)/_0x2eeb3b[_0x384ae7(0x212)],_0x981cb1=_0x1b079a['filter'](_0x39d1ef=>_0x39d1ef[_0x384ae7(0x2b4)][_0x384ae7(0x29f)]?.[_0x384ae7(0x294)]>0x0)[_0x384ae7(0x212)];return{'averageEfficiency':_0x5f4ece,'averageOutSamplePF':_0x16d22d,'averageOutSampleWR':_0x4ca535,'profitableWindows':_0x981cb1,'totalWindows':_0x1b079a[_0x384ae7(0x212)],'consistency':_0x981cb1/_0x1b079a[_0x384ae7(0x212)],'robust':_0x5f4ece>0x32&&_0x16d22d>1.2};},async 'runRobustnessTest'(_0xf4a6e1){const _0x3e162c=a0_0xc521,{symbol:_0x4d3399,strategy:_0x2cc5db,variations:variations=0xa}=_0xf4a6e1;console[_0x3e162c(0x21b)](_0x3e162c(0x22e)+_0x4d3399);const _0x5f248e=[];for(let _0x1bc476=0x0;_0x1bc476<variations;_0x1bc476++){const _0x49cfba=this[_0x3e162c(0x24f)](_0x2cc5db,_0x1bc476/variations),_0x15ed69=await this[_0x3e162c(0x2cc)]({'symbol':_0x4d3399,'strategy':_0x49cfba,'startDate':new Date(Date[_0x3e162c(0x22a)]()-0x5a*0x18*0x3c*0x3c*0x3e8)[_0x3e162c(0x2aa)](),'endDate':new Date()['toISOString']()});_0x5f248e['push']({'variation':_0x1bc476+0x1,'paramChange':_0x1bc476/variations*0x28-0x14,'stats':_0x15ed69[_0x3e162c(0x21f)]});}const _0xb88a9=_0x5f248e[_0x3e162c(0x2b8)](_0x2dcfe8=>_0x2dcfe8['stats']?.[_0x3e162c(0x2c8)]||0x0),_0x13df4c=_0xb88a9[_0x3e162c(0x2c6)]((_0x8abee2,_0x1ed246)=>_0x8abee2+_0x1ed246,0x0)/_0xb88a9[_0x3e162c(0x212)],_0xd6cee5=Math[_0x3e162c(0x2bb)](_0xb88a9['reduce']((_0x3ab2a0,_0x16cbe6)=>_0x3ab2a0+Math[_0x3e162c(0x219)](_0x16cbe6-_0x13df4c,0x2),0x0)/_0xb88a9[_0x3e162c(0x212)]),_0x116158=_0x5f248e['filter'](_0x16a266=>_0x16a266[_0x3e162c(0x29f)]?.[_0x3e162c(0x294)]>0x0)[_0x3e162c(0x212)];return{'symbol':_0x4d3399,'strategy':_0x2cc5db['name'],'variations':_0x5f248e,'robustness':{'averageProfitFactor':_0x13df4c,'standardDeviation':_0xd6cee5,'coefficientOfVariation':_0x13df4c>0x0?_0xd6cee5/_0x13df4c:0x0,'profitableVariations':_0x116158,'totalVariations':variations,'robust':_0x116158/variations>0.7&&(_0x13df4c>0x0?_0xd6cee5/_0x13df4c:0x1)<0.3}};},'varyStrategyParams'(_0x4ba950,_0x41c963){const _0x4ddd91=a0_0xc521;return{..._0x4ba950,'name':_0x4ba950[_0x4ddd91(0x229)]+'_v'+Math[_0x4ddd91(0x243)](_0x41c963*0x64),'params':_0x4ba950['params']?{..._0x4ba950[_0x4ddd91(0x1f0)],'period':Math['round']((_0x4ba950[_0x4ddd91(0x1f0)][_0x4ddd91(0x217)]||0xe)*(0.8+_0x41c963*0.4)),'threshold':(_0x4ba950['params'][_0x4ddd91(0x1fc)]||0.5)*(0.8+_0x41c963*0.4)}:{}};},'getValidationSummary'(){const _0x575df5=a0_0xc521,_0x2aeeb5=this['state'][_0x575df5(0x203)],_0x3d00ce=this['state'][_0x575df5(0x268)];return{'total':_0x2aeeb5[_0x575df5(0x212)]+_0x3d00ce[_0x575df5(0x212)],'validated':_0x2aeeb5[_0x575df5(0x212)],'rejected':_0x3d00ce[_0x575df5(0x212)],'validationRate':_0x2aeeb5[_0x575df5(0x212)]/(_0x2aeeb5[_0x575df5(0x212)]+_0x3d00ce['length'])||0x0,'byQuality':{'excellent':_0x2aeeb5['filter'](_0x4cb801=>_0x4cb801[_0x575df5(0x239)]==='excellent')[_0x575df5(0x212)],'good':_0x2aeeb5[_0x575df5(0x29b)](_0x303aca=>_0x303aca['quality']==='good')['length'],'acceptable':_0x2aeeb5[_0x575df5(0x29b)](_0x1a6a77=>_0x1a6a77[_0x575df5(0x239)]===_0x575df5(0x211))[_0x575df5(0x212)]},'averageScore':_0x2aeeb5['reduce']((_0x481c59,_0x118c2b)=>_0x481c59+_0x118c2b[_0x575df5(0x295)],0x0)/_0x2aeeb5[_0x575df5(0x212)]||0x0,'averageConfidence':_0x2aeeb5['reduce']((_0x5b0011,_0x3aec46)=>_0x5b0011+_0x3aec46[_0x575df5(0x2a6)],0x0)/_0x2aeeb5[_0x575df5(0x212)]||0x0,'topRejectionReasons':this[_0x575df5(0x208)]()};},'getTopRejectionReasons'(){const _0x414206=a0_0xc521,_0x239e60={};return this[_0x414206(0x27d)][_0x414206(0x268)][_0x414206(0x25f)](_0x3e0b88=>{const _0x412b3e=_0x414206;_0x3e0b88['warnings'][_0x412b3e(0x25f)](_0x50d76f=>{_0x239e60[_0x50d76f]=(_0x239e60[_0x50d76f]||0x0)+0x1;});}),Object[_0x414206(0x2bc)](_0x239e60)[_0x414206(0x210)]((_0x519c57,_0x4b7527)=>_0x4b7527[0x1]-_0x519c57[0x1])[_0x414206(0x240)](0x0,0x5)[_0x414206(0x2b8)](([_0x3fc8c9,_0x43319e])=>({'reason':_0x3fc8c9,'count':_0x43319e}));},'exportBacktestReport'(_0x25d6eb){const _0x4308d7=a0_0xc521;return{'summary':{'symbol':_0x25d6eb[_0x4308d7(0x260)],'strategy':_0x25d6eb['strategy'],'period':_0x25d6eb[_0x4308d7(0x217)],'initialCapital':_0x25d6eb[_0x4308d7(0x265)],'finalCapital':_0x25d6eb[_0x4308d7(0x298)],'return':_0x25d6eb[_0x4308d7(0x21f)][_0x4308d7(0x206)]},'statistics':_0x25d6eb[_0x4308d7(0x21f)],'trades':_0x25d6eb[_0x4308d7(0x201)]['map'](_0x5e7881=>({'direction':_0x5e7881[_0x4308d7(0x224)],'entry':_0x5e7881[_0x4308d7(0x248)],'exit':_0x5e7881['exitPrice'],'pnl':_0x5e7881[_0x4308d7(0x2ae)],'pnlPercent':_0x5e7881[_0x4308d7(0x299)],'reason':_0x5e7881[_0x4308d7(0x1f8)],'duration':_0x5e7881[_0x4308d7(0x2ca)]})),'exportedAt':Date['now']()};}};window[a0_0x3a359a(0x238)]=AISignalValidator,console[a0_0x3a359a(0x21b)](a0_0x3a359a(0x255));