/**
 * SHDWXBT - smart-risk-manager.js
 * Copyright (c) 2024-2026 SHDWXBT. All rights reserved.
 * 
 * PROPRIETARY AND CONFIDENTIAL
 * Unauthorized copying, modification, distribution, or use is strictly prohibited.
 * This code is protected by intellectual property laws.
 * 
 * Build: 2026-01-28T12:08:09.220Z
 * Checksum: SHDW-64F1ED6D
 */
function a0_0x5e50(_0x1bff01,_0x3d328f){_0x1bff01=_0x1bff01-0x1d8;const _0x454e8f=a0_0x454e();let _0x5e5028=_0x454e8f[_0x1bff01];return _0x5e5028;}const a0_0x328251=a0_0x5e50;function a0_0x454e(){const _0x545855=['entry','Trading\x20pausado\x20por\x20drawdown\x20excessivo','positions','WIFUSDT','applyConfidenceAdjustment','LINKUSDT','splice','COMPUSDT','round','Exposi√ß√£o\x20m√°xima\x20ao\x20setor\x20','volatility','symbol','dailyStats','parse','maxRiskPerDay','ADAUSDT','includes','capital','pausedUntil','calculateOptimalF','level','getItem','highestPrice','random','initial','Posi√ß√£o\x20n√£o\x20encontrada','applyVolatilityAdjustment','finalEquity','2ZkkSZx','calculateSectorExposure','partialCloses','SHIBUSDT','riskPercent','SANDUSDT','BONKUSDT','riskUsed','atrMultiplier','push','12075282BvTsMW','dayTrading','warn','findIndex','error','lowestPrice','map','üíé\x20Inicializando\x20Smart\x20Risk\x20Manager...','1334507vlzOJm','structure','closePercent','Par√¢metros\x20inv√°lidos','maxSingleAssetExposure','long','11aIFakW','calculateAdaptiveSize','loadState','setDate','avgWin','avgLoss','fixedPercent','‚úÖ\x20Smart\x20Risk\x20Manager\x20inicializado','return','GALAUSDT','updateDrawdown','activated','smart_risk_manager_state','entryPrice','pow','saveState','floor','performance','getSector','pnlPercent','winCount','7EjwAmv','AXSUSDT','maxOpenPositions','totalTrades','current','peak','price','N√∫mero\x20m√°ximo\x20de\x20posi√ß√µes\x20abertas','4447785Ayzulb','UNIUSDT','DOGEUSDT','Limite\x20de\x20risco\x20di√°rio\x20atingido','max','date','closedTrades','FETUSDT','stringify','maxRiskPerTrade','maxDrawdown','Limite\x20de\x20risco\x20semanal\x20atingido','1910cLigub','minEdge','pos_','takeProfitLevels','state','Insuficientes\x20trades\x20para\x20simula√ß√£o\x20(m√≠n.\x2020)','sectors','AVAXUSDT','BTCUSDT','closePosition','MATICUSDT','1196704mMPaMK','countCorrelatedPositions','NEARUSDT','drawdown','maxRiskPerWeek','canOpenTrade','newStop','31540540wagAAW','stopLoss','\x20atingida','open','calculatePositionSize','maxCorrelatedPositions','adaptive','openTime','target','maxSectorExposure','MANAUSDT','zone','min','breakeven','stop_loss','Muitas\x20posi√ß√µes\x20em\x20ativos\x20correlacionados','yellow','tradesCount','üíé\x20Smart\x20Risk\x20Manager\x20pronto\x20para\x20uso','N√£o\x20foi\x20poss√≠vel\x20salvar\x20estado\x20do\x20Risk\x20Manager','reduce','takeProfit','positionValue','find','OCEANUSDT','1219504OnMaIG','hit','maxAllocation','drawdownState','forEach','config','sqrt','ARBUSDT','updateTrailingStop','entries','J√°\x20existe\x20posi√ß√£o\x20aberta\x20neste\x20ativo','atr','weekStart','type','profitFactor','red','log','filter','lossCount','toLocaleString','trailing','quantity','getDay','weeklyStats','SUSHIUSDT','trailingDistance','kelly','pnl','winRate','green','1524VDvKqf','optimalF','calculateKellySize','setItem','init','direction','slice','breakEvenActivation','short','reason','abs','sharpeRatio','now','calculateExpectedValue','expectancy','length','limits','sizingMethod','riskAmount','ETHUSDT','PEPEUSDT','N√£o\x20foi\x20poss√≠vel\x20carregar\x20estado\x20do\x20Risk\x20Manager'];a0_0x454e=function(){return _0x545855;};return a0_0x454e();}(function(_0x4c4d3a,_0x217fc6){const _0x3905b6=a0_0x5e50,_0x43fa0f=_0x4c4d3a();while(!![]){try{const _0x3ef31e=-parseInt(_0x3905b6(0x1ea))/0x1*(-parseInt(_0x3905b6(0x1d8))/0x2)+parseInt(_0x3905b6(0x20d))/0x3+-parseInt(_0x3905b6(0x244))/0x4+parseInt(_0x3905b6(0x219))/0x5*(parseInt(_0x3905b6(0x262))/0x6)+-parseInt(_0x3905b6(0x205))/0x7*(-parseInt(_0x3905b6(0x224))/0x8)+parseInt(_0x3905b6(0x1e2))/0x9+-parseInt(_0x3905b6(0x22b))/0xa*(parseInt(_0x3905b6(0x1f0))/0xb);if(_0x3ef31e===_0x217fc6)break;else _0x43fa0f['push'](_0x43fa0f['shift']());}catch(_0x2cd4f4){_0x43fa0f['push'](_0x43fa0f['shift']());}}}(a0_0x454e,0xe7136));const SmartRiskManager={'config':{'capital':{'initial':0x2710,'current':0x2710,'reserved':0.2,'maxDrawdownAllowed':0.15},'limits':{'maxRiskPerTrade':0.01,'maxRiskPerDay':0.03,'maxRiskPerWeek':0.07,'maxOpenPositions':0x5,'maxCorrelatedPositions':0x2,'maxSectorExposure':0.15,'maxSingleAssetExposure':0.2},'sizingMethod':a0_0x328251(0x231),'kelly':{'fraction':0.25,'minEdge':0.05,'maxAllocation':0.1},'stopLoss':{'type':'atr','atrMultiplier':1.5,'fixedPercent':0.02,'timeBasedCandles':0xc,'trailingActivation':0.015,'trailingDistance':0.01,'breakEvenActivation':0.01},'takeProfit':{'levels':[{'target':1.5,'closePercent':0.3},{'target':2.5,'closePercent':0.4},{'target':0x4,'closePercent':0.3}],'trailingAfterTP2':!![]},'drawdown':{'yellowZone':0.05,'redZone':0.1,'pauseZone':0.15,'resetPeriodDays':0x3},'sectors':{'major':[a0_0x328251(0x221),a0_0x328251(0x275)],'defi':['AAVEUSDT',a0_0x328251(0x20e),a0_0x328251(0x27d),a0_0x328251(0x27f),'MKRUSDT',a0_0x328251(0x25c)],'layer1':['SOLUSDT',a0_0x328251(0x220),a0_0x328251(0x287),'DOTUSDT','ATOMUSDT',a0_0x328251(0x226)],'layer2':[a0_0x328251(0x223),a0_0x328251(0x24b),'OPUSDT'],'gaming':[a0_0x328251(0x1dd),a0_0x328251(0x235),a0_0x328251(0x206),a0_0x328251(0x1f9),'ENJUSDT'],'ai':[a0_0x328251(0x214),'AGIXUSDT',a0_0x328251(0x243),'RNDRUSDT'],'meme':[a0_0x328251(0x20f),a0_0x328251(0x1db),a0_0x328251(0x276),'BONKUSDT',a0_0x328251(0x27b)]}},'state':{'positions':[],'closedTrades':[],'dailyStats':{'date':null,'pnl':0x0,'riskUsed':0x0,'tradesCount':0x0,'winCount':0x0,'lossCount':0x0},'weeklyStats':{'weekStart':null,'pnl':0x0,'riskUsed':0x0},'drawdownState':{'peak':0x2710,'current':0x2710,'drawdown':0x0,'maxDrawdown':0x0,'zone':a0_0x328251(0x261),'pausedUntil':null},'performance':{'winRate':0x0,'avgWin':0x0,'avgLoss':0x0,'profitFactor':0x0,'expectancy':0x0,'sharpeRatio':0x0,'totalTrades':0x0}},'init'(_0x1205d6=0x2710){const _0xded0ab=a0_0x328251;return console['log'](_0xded0ab(0x1e9)),this['config']['capital'][_0xded0ab(0x290)]=_0x1205d6,this[_0xded0ab(0x249)][_0xded0ab(0x289)][_0xded0ab(0x209)]=_0x1205d6,this[_0xded0ab(0x21d)][_0xded0ab(0x247)]['peak']=_0x1205d6,this['state'][_0xded0ab(0x247)][_0xded0ab(0x209)]=_0x1205d6,this[_0xded0ab(0x1f2)](),this['checkDailyReset'](),console[_0xded0ab(0x254)](_0xded0ab(0x1f7)),console['log']('üí∞\x20Capital:\x20$'+_0x1205d6[_0xded0ab(0x257)]()),this;},'calculatePositionSize'(_0x3cf006){const _0x4c0528=a0_0x328251,{symbol:_0x564d78,entryPrice:_0xa7a28d,stopLoss:_0x19144f,confidence:confidence=0x46,winRate:winRate=null,avgWinLoss:avgWinLoss=null,profile:profile=_0x4c0528(0x1e3)}=_0x3cf006;if(!_0x564d78||!_0xa7a28d||!_0x19144f)return{'valid':![],'error':_0x4c0528(0x1ed)};const _0xc226b=this[_0x4c0528(0x229)](_0x564d78);if(!_0xc226b['allowed'])return{'valid':![],'error':_0xc226b[_0x4c0528(0x26b)]};const _0x219f2=Math[_0x4c0528(0x26c)](_0xa7a28d-_0x19144f),_0x4c8245=_0x219f2/_0xa7a28d;let _0xbd1025;switch(this[_0x4c0528(0x249)][_0x4c0528(0x273)]){case _0x4c0528(0x25e):_0xbd1025=this[_0x4c0528(0x264)](winRate,avgWinLoss);break;case _0x4c0528(0x263):_0xbd1025=this[_0x4c0528(0x28b)]();break;case _0x4c0528(0x231):_0xbd1025=this[_0x4c0528(0x1f1)](confidence,_0x4c8245);break;default:_0xbd1025=this[_0x4c0528(0x249)]['limits'][_0x4c0528(0x216)];}_0xbd1025=this['applyDrawdownAdjustment'](_0xbd1025),_0xbd1025=this[_0x4c0528(0x292)](_0xbd1025,_0x564d78),_0xbd1025=this[_0x4c0528(0x27c)](_0xbd1025,confidence);const _0x2736b7=this[_0x4c0528(0x249)]['capital']['current']*this['config'][_0x4c0528(0x272)][_0x4c0528(0x1ee)],_0x24a145=this['config']['capital'][_0x4c0528(0x209)]*_0xbd1025,_0x3162f1=_0x24a145/_0x4c8245,_0x1dee64=Math[_0x4c0528(0x237)](_0x3162f1,_0x2736b7)/_0xa7a28d,_0x31b201=_0x1dee64*_0x219f2,_0x1c9ef4=_0x31b201/this[_0x4c0528(0x249)]['capital'][_0x4c0528(0x209)],_0x44c3aa=this['calculateTakeProfitLevels'](_0xa7a28d,_0x19144f,_0x219f2);return{'valid':!![],'symbol':_0x564d78,'entryPrice':_0xa7a28d,'stopLoss':_0x19144f,'quantity':Math['floor'](_0x1dee64*0x3e8)/0x3e8,'positionValue':Math[_0x4c0528(0x280)](_0x1dee64*_0xa7a28d*0x64)/0x64,'riskAmount':Math[_0x4c0528(0x280)](_0x31b201*0x64)/0x64,'riskPercent':Math[_0x4c0528(0x280)](_0x1c9ef4*0x2710)/0x64,'maxRiskAllowed':Math[_0x4c0528(0x280)](this[_0x4c0528(0x249)][_0x4c0528(0x272)][_0x4c0528(0x216)]*0x2710)/0x64,'takeProfitLevels':_0x44c3aa,'method':this[_0x4c0528(0x249)][_0x4c0528(0x273)],'adjustments':{'drawdown':this[_0x4c0528(0x21d)][_0x4c0528(0x247)][_0x4c0528(0x236)],'confidence':confidence,'volatility':'normal'}};},'calculateKellySize'(_0x5262a6,_0x54ecd9){const _0x4f6128=a0_0x328251,_0x5537a1=_0x5262a6||this[_0x4f6128(0x21d)][_0x4f6128(0x201)][_0x4f6128(0x260)]||0.55,_0x7670c7=_0x54ecd9||this[_0x4f6128(0x21d)][_0x4f6128(0x201)]['avgWin']/(this[_0x4f6128(0x21d)]['performance'][_0x4f6128(0x1f5)]||0x1)||0x2,_0x1d73b2=_0x5537a1-(0x1-_0x5537a1)/_0x7670c7,_0x5481ee=_0x1d73b2*this[_0x4f6128(0x249)][_0x4f6128(0x25e)]['fraction'];return Math[_0x4f6128(0x237)](Math[_0x4f6128(0x211)](0x0,_0x5481ee),this['config'][_0x4f6128(0x25e)][_0x4f6128(0x246)]);},'calculateOptimalF'(){const _0x3c70fa=a0_0x328251,_0x4cec31=this['state'][_0x3c70fa(0x213)][_0x3c70fa(0x268)](-0x1e);if(_0x4cec31[_0x3c70fa(0x271)]<0xa)return this[_0x3c70fa(0x249)][_0x3c70fa(0x272)][_0x3c70fa(0x216)];let _0xccdb85=0x0,_0x3dced0=0x0;for(let _0x370ee4=0.01;_0x370ee4<=0.3;_0x370ee4+=0.01){let _0xb35cba=0x1;_0x4cec31[_0x3c70fa(0x248)](_0x5a4a1e=>{const _0x35a114=_0x3c70fa,_0x597415=0x1+_0x5a4a1e[_0x35a114(0x203)]/0x64*_0x370ee4/this[_0x35a114(0x249)][_0x35a114(0x272)][_0x35a114(0x216)];_0xb35cba*=_0x597415;}),_0xb35cba>_0x3dced0&&(_0x3dced0=_0xb35cba,_0xccdb85=_0x370ee4);}return Math[_0x3c70fa(0x237)](_0xccdb85*0.5,this[_0x3c70fa(0x249)][_0x3c70fa(0x272)][_0x3c70fa(0x216)]*0x2);},'calculateAdaptiveSize'(_0x59412f,_0x27e45b){const _0x1f5ccd=a0_0x328251;let _0x328107=this[_0x1f5ccd(0x249)][_0x1f5ccd(0x272)][_0x1f5ccd(0x216)];if(_0x59412f>=0x5a)_0x328107*=1.3;else{if(_0x59412f>=0x50)_0x328107*=1.15;else{if(_0x59412f>=0x46)_0x328107*=0x1;else{if(_0x59412f>=0x3c)_0x328107*=0.75;else _0x328107*=0.5;}}}if(this[_0x1f5ccd(0x21d)][_0x1f5ccd(0x201)]['winRate']>0.6)_0x328107*=1.1;else{if(this[_0x1f5ccd(0x21d)][_0x1f5ccd(0x201)][_0x1f5ccd(0x260)]<0.4)_0x328107*=0.8;}const _0x133f09=this[_0x1f5ccd(0x26f)](_0x59412f);return _0x133f09<this['config'][_0x1f5ccd(0x25e)][_0x1f5ccd(0x21a)]&&(_0x328107*=0.5),_0x328107;},'calculateExpectedValue'(_0x22f1cf){const _0x47356a=_0x22f1cf/0x64,_0x1feaf1=0x1-_0x47356a,_0xac53fa=2.5,_0x2162bc=0x1;return _0x47356a*_0xac53fa-_0x1feaf1*_0x2162bc;},'applyDrawdownAdjustment'(_0x22dd95){const _0x58ae51=a0_0x328251,_0x1a9fcb=this[_0x58ae51(0x21d)]['drawdownState'][_0x58ae51(0x236)];switch(_0x1a9fcb){case _0x58ae51(0x23b):return _0x22dd95*0.5;case _0x58ae51(0x253):return _0x22dd95*0.25;case'pause':return 0x0;default:return _0x22dd95;}},'applyVolatilityAdjustment'(_0x478064,_0x531961){const _0x274461=a0_0x328251,_0x9424eb=[_0x274461(0x276),_0x274461(0x1de),_0x274461(0x27b),_0x274461(0x1db)];if(_0x9424eb[_0x274461(0x288)](_0x531961))return _0x478064*0.7;return _0x478064;},'applyConfidenceAdjustment'(_0xbfbb26,_0x12b6be){const _0x215cc6=a0_0x328251,_0x2f349a=this[_0x215cc6(0x249)]['confidenceMultipliers']||{0x5a:1.3,0x50:1.1,0x46:0x1,0x3c:0.8,0x32:0.6};if(_0x12b6be>=0x5a)return _0xbfbb26*1.3;if(_0x12b6be>=0x50)return _0xbfbb26*1.1;if(_0x12b6be>=0x46)return _0xbfbb26*0x1;if(_0x12b6be>=0x3c)return _0xbfbb26*0.8;return _0xbfbb26*0.6;},'calculateTakeProfitLevels'(_0x222298,_0x1850b2,_0x1c08a9){const _0x4952c7=a0_0x328251,_0x453834=_0x222298>_0x1850b2?_0x4952c7(0x1ef):_0x4952c7(0x26a);return this[_0x4952c7(0x249)][_0x4952c7(0x240)]['levels']['map']((_0x1c5270,_0x5cf4ad)=>{const _0x43cbf2=_0x4952c7,_0x353fee=_0x1c08a9*_0x1c5270[_0x43cbf2(0x233)],_0x19acf7=_0x453834===_0x43cbf2(0x1ef)?_0x222298+_0x353fee:_0x222298-_0x353fee;return{'level':_0x5cf4ad+0x1,'price':Math[_0x43cbf2(0x280)](_0x19acf7*0x64)/0x64,'riskReward':_0x1c5270[_0x43cbf2(0x233)],'closePercent':_0x1c5270[_0x43cbf2(0x1ec)]*0x64,'profit':Math[_0x43cbf2(0x280)](_0x353fee*0x64)/0x64};});},'canOpenTrade'(_0xb87c6f){const _0x339c5a=a0_0x328251;if(this[_0x339c5a(0x21d)][_0x339c5a(0x247)]['zone']==='pause'){if(this[_0x339c5a(0x21d)][_0x339c5a(0x247)][_0x339c5a(0x28a)]>Date[_0x339c5a(0x26e)]())return{'allowed':![],'reason':_0x339c5a(0x279)};}if(this['state'][_0x339c5a(0x284)]['riskUsed']>=this['config'][_0x339c5a(0x272)][_0x339c5a(0x286)])return{'allowed':![],'reason':_0x339c5a(0x210)};if(this[_0x339c5a(0x21d)][_0x339c5a(0x25b)]['riskUsed']>=this[_0x339c5a(0x249)][_0x339c5a(0x272)][_0x339c5a(0x228)])return{'allowed':![],'reason':_0x339c5a(0x218)};if(this[_0x339c5a(0x21d)][_0x339c5a(0x27a)][_0x339c5a(0x271)]>=this[_0x339c5a(0x249)][_0x339c5a(0x272)]['maxOpenPositions'])return{'allowed':![],'reason':_0x339c5a(0x20c)};const _0x355166=this['state'][_0x339c5a(0x27a)][_0x339c5a(0x242)](_0x257802=>_0x257802[_0x339c5a(0x283)]===_0xb87c6f);if(_0x355166)return{'allowed':![],'reason':_0x339c5a(0x24e)};const _0x2a9ef7=this[_0x339c5a(0x202)](_0xb87c6f),_0x3f0e70=this[_0x339c5a(0x1d9)](_0x2a9ef7);if(_0x3f0e70>=this[_0x339c5a(0x249)][_0x339c5a(0x272)][_0x339c5a(0x234)])return{'allowed':![],'reason':_0x339c5a(0x281)+_0x2a9ef7+_0x339c5a(0x22d)};const _0x107308=this[_0x339c5a(0x225)](_0xb87c6f);if(_0x107308>=this['config'][_0x339c5a(0x272)][_0x339c5a(0x230)])return{'allowed':![],'reason':_0x339c5a(0x23a)};return{'allowed':!![]};},'getSector'(_0x1d983c){const _0x293f92=a0_0x328251;for(const [_0xeb46e0,_0x767a3a]of Object[_0x293f92(0x24d)](this[_0x293f92(0x249)][_0x293f92(0x21f)])){if(_0x767a3a[_0x293f92(0x288)](_0x1d983c))return _0xeb46e0;}return'other';},'calculateSectorExposure'(_0x107e3b){const _0x52a5c9=a0_0x328251,_0x1eafc6=this[_0x52a5c9(0x21d)][_0x52a5c9(0x27a)][_0x52a5c9(0x255)](_0x18431a=>this[_0x52a5c9(0x202)](_0x18431a[_0x52a5c9(0x283)])===_0x107e3b),_0x3ae95c=_0x1eafc6[_0x52a5c9(0x23f)]((_0x5509fc,_0x9ce9ff)=>_0x5509fc+_0x9ce9ff['positionValue']/this[_0x52a5c9(0x249)][_0x52a5c9(0x289)][_0x52a5c9(0x209)],0x0);return _0x3ae95c;},'countCorrelatedPositions'(_0x58b1fb){const _0x293c8a=a0_0x328251,_0x4d33a5=this[_0x293c8a(0x202)](_0x58b1fb);return this[_0x293c8a(0x21d)][_0x293c8a(0x27a)][_0x293c8a(0x255)](_0x59e425=>this[_0x293c8a(0x202)](_0x59e425[_0x293c8a(0x283)])===_0x4d33a5)[_0x293c8a(0x271)];},'calculateStopLoss'(_0x49d5c5){const _0x5ef3ab=a0_0x328251,{entry:_0x3203f,direction:_0x2a8dc2,atr:_0x1c6765,structure:_0x165dee,type:type=this['config'][_0x5ef3ab(0x22c)][_0x5ef3ab(0x251)]}=_0x49d5c5;let _0x3f9014;switch(type){case _0x5ef3ab(0x24f):const _0x1a3fa4=_0x1c6765*this[_0x5ef3ab(0x249)][_0x5ef3ab(0x22c)][_0x5ef3ab(0x1e0)];_0x3f9014=_0x2a8dc2==='long'?_0x3203f-_0x1a3fa4:_0x3203f+_0x1a3fa4;break;case _0x5ef3ab(0x1eb):_0x3f9014=_0x165dee||(_0x2a8dc2===_0x5ef3ab(0x1ef)?_0x3203f*(0x1-this['config'][_0x5ef3ab(0x22c)][_0x5ef3ab(0x1f6)]):_0x3203f*(0x1+this[_0x5ef3ab(0x249)]['stopLoss'][_0x5ef3ab(0x1f6)]));break;case _0x5ef3ab(0x282):const _0x241888=_0x3203f*this[_0x5ef3ab(0x249)]['stopLoss'][_0x5ef3ab(0x1f6)]*1.5;_0x3f9014=_0x2a8dc2===_0x5ef3ab(0x1ef)?_0x3203f-_0x241888:_0x3203f+_0x241888;break;default:const _0x1e5553=_0x3203f*this[_0x5ef3ab(0x249)][_0x5ef3ab(0x22c)][_0x5ef3ab(0x1f6)];_0x3f9014=_0x2a8dc2===_0x5ef3ab(0x1ef)?_0x3203f-_0x1e5553:_0x3203f+_0x1e5553;}return Math[_0x5ef3ab(0x280)](_0x3f9014*0x64)/0x64;},'updateTrailingStop'(_0x67ac85,_0x26b56f){const _0x14e8c4=a0_0x328251,{entry:_0x4a6e4f,direction:_0x120822,stopLoss:_0x3869c9,highestPrice:_0x50e1c8,lowestPrice:_0x3e9675}=_0x67ac85,_0x46f213=_0x120822===_0x14e8c4(0x1ef)?(_0x26b56f-_0x4a6e4f)/_0x4a6e4f:(_0x4a6e4f-_0x26b56f)/_0x4a6e4f;if(_0x46f213<this['config']['stopLoss']['trailingActivation'])return{'updated':![],'newStop':_0x3869c9};let _0x48ae8d;if(_0x120822===_0x14e8c4(0x1ef)){const _0x19e8d2=Math['max'](_0x50e1c8||_0x4a6e4f,_0x26b56f),_0x3298e3=_0x19e8d2*(0x1-this[_0x14e8c4(0x249)][_0x14e8c4(0x22c)]['trailingDistance']);_0x48ae8d=Math[_0x14e8c4(0x211)](_0x3869c9,_0x3298e3);}else{const _0xad4a08=Math['min'](_0x3e9675||_0x4a6e4f,_0x26b56f),_0x20f81a=_0xad4a08*(0x1+this['config']['stopLoss'][_0x14e8c4(0x25d)]);_0x48ae8d=Math['min'](_0x3869c9,_0x20f81a);}return{'updated':_0x48ae8d!==_0x3869c9,'newStop':Math[_0x14e8c4(0x280)](_0x48ae8d*0x64)/0x64,'type':_0x14e8c4(0x258)};},'checkBreakevenStop'(_0xa853f,_0x3604d2){const _0x262582=a0_0x328251,{entry:_0x42f3e0,direction:_0x24e8b9,stopLoss:_0x261cd9}=_0xa853f,_0x272d48=_0x24e8b9==='long'?(_0x3604d2-_0x42f3e0)/_0x42f3e0:(_0x42f3e0-_0x3604d2)/_0x42f3e0;if(_0x272d48>=this[_0x262582(0x249)][_0x262582(0x22c)][_0x262582(0x269)]){const _0xad8c96=_0x42f3e0*0.001,_0x268685=_0x24e8b9===_0x262582(0x1ef)?_0x42f3e0+_0xad8c96:_0x42f3e0-_0xad8c96;if(_0x24e8b9===_0x262582(0x1ef)&&_0x268685>_0x261cd9||_0x24e8b9===_0x262582(0x26a)&&_0x268685<_0x261cd9)return{'activated':!![],'newStop':Math['round'](_0x268685*0x64)/0x64,'type':_0x262582(0x238)};}return{'activated':![]};},'openPosition'(_0x1b4ac1){const _0x511bc0=a0_0x328251,_0x45a8c4=this[_0x511bc0(0x22f)](_0x1b4ac1);if(!_0x45a8c4['valid'])return{'success':![],'error':_0x45a8c4[_0x511bc0(0x1e6)]};const _0x2cf451={'id':_0x511bc0(0x21b)+Date[_0x511bc0(0x26e)](),'symbol':_0x1b4ac1['symbol'],'direction':_0x1b4ac1['entryPrice']>_0x1b4ac1[_0x511bc0(0x22c)]?_0x511bc0(0x1ef):'short','entry':_0x45a8c4[_0x511bc0(0x1fd)],'stopLoss':_0x45a8c4[_0x511bc0(0x22c)],'quantity':_0x45a8c4[_0x511bc0(0x259)],'positionValue':_0x45a8c4['positionValue'],'riskAmount':_0x45a8c4['riskAmount'],'riskPercent':_0x45a8c4[_0x511bc0(0x1dc)],'takeProfitLevels':_0x45a8c4[_0x511bc0(0x21c)],'openTime':Date['now'](),'status':_0x511bc0(0x22e),'highestPrice':_0x45a8c4[_0x511bc0(0x1fd)],'lowestPrice':_0x45a8c4[_0x511bc0(0x1fd)],'partialCloses':[],'stopHistory':[{'price':_0x45a8c4[_0x511bc0(0x22c)],'type':_0x511bc0(0x290),'time':Date[_0x511bc0(0x26e)]()}]};return this[_0x511bc0(0x21d)][_0x511bc0(0x27a)][_0x511bc0(0x1e1)](_0x2cf451),this[_0x511bc0(0x21d)][_0x511bc0(0x284)]['riskUsed']+=_0x45a8c4[_0x511bc0(0x1dc)]/0x64,this[_0x511bc0(0x21d)][_0x511bc0(0x25b)][_0x511bc0(0x1df)]+=_0x45a8c4[_0x511bc0(0x1dc)]/0x64,this[_0x511bc0(0x21d)][_0x511bc0(0x284)]['tradesCount']++,this[_0x511bc0(0x1ff)](),{'success':!![],'position':_0x2cf451};},'updatePosition'(_0x3b5497,_0x44b421){const _0x20d6c2=a0_0x328251,_0x1cf417=this[_0x20d6c2(0x21d)][_0x20d6c2(0x27a)][_0x20d6c2(0x242)](_0x2fcc13=>_0x2fcc13['id']===_0x3b5497);if(!_0x1cf417)return{'updated':![],'error':_0x20d6c2(0x291)};_0x1cf417['highestPrice']=Math['max'](_0x1cf417[_0x20d6c2(0x28e)],_0x44b421),_0x1cf417[_0x20d6c2(0x1e7)]=Math[_0x20d6c2(0x237)](_0x1cf417[_0x20d6c2(0x1e7)],_0x44b421);const _0x353ad3=[],_0x1b8bfe=this['checkBreakevenStop'](_0x1cf417,_0x44b421);_0x1b8bfe[_0x20d6c2(0x1fb)]&&(_0x1cf417['stopLoss']=_0x1b8bfe[_0x20d6c2(0x22a)],_0x1cf417['stopHistory']['push']({'price':_0x1b8bfe[_0x20d6c2(0x22a)],'type':_0x1b8bfe[_0x20d6c2(0x251)],'time':Date['now']()}),_0x353ad3[_0x20d6c2(0x1e1)](_0x20d6c2(0x238)));const _0x37b87f=this[_0x20d6c2(0x24c)](_0x1cf417,_0x44b421);_0x37b87f['updated']&&(_0x1cf417[_0x20d6c2(0x22c)]=_0x37b87f[_0x20d6c2(0x22a)],_0x1cf417['stopHistory'][_0x20d6c2(0x1e1)]({'price':_0x37b87f[_0x20d6c2(0x22a)],'type':_0x37b87f[_0x20d6c2(0x251)],'time':Date[_0x20d6c2(0x26e)]()}),_0x353ad3[_0x20d6c2(0x1e1)](_0x20d6c2(0x258)));const _0x1159b6=_0x1cf417[_0x20d6c2(0x267)]==='long'?_0x44b421<=_0x1cf417[_0x20d6c2(0x22c)]:_0x44b421>=_0x1cf417[_0x20d6c2(0x22c)];if(_0x1159b6)return this[_0x20d6c2(0x222)](_0x3b5497,_0x44b421,_0x20d6c2(0x239));for(const _0x48db2e of _0x1cf417[_0x20d6c2(0x21c)]){if(_0x48db2e['hit'])continue;const _0x5a2241=_0x1cf417[_0x20d6c2(0x267)]==='long'?_0x44b421>=_0x48db2e['price']:_0x44b421<=_0x48db2e[_0x20d6c2(0x20b)];if(_0x5a2241){const _0x1af9ad=_0x1cf417[_0x20d6c2(0x259)]*(_0x48db2e['closePercent']/0x64);this['partialClose'](_0x3b5497,_0x1af9ad,_0x44b421,_0x48db2e[_0x20d6c2(0x28c)]),_0x48db2e[_0x20d6c2(0x245)]=!![],_0x353ad3[_0x20d6c2(0x1e1)]('tp'+_0x48db2e[_0x20d6c2(0x28c)]);}}return this[_0x20d6c2(0x1ff)](),{'updated':_0x353ad3[_0x20d6c2(0x271)]>0x0,'updates':_0x353ad3,'position':_0x1cf417};},'partialClose'(_0x3f4dee,_0x4fb415,_0x22e544,_0x26b558){const _0x383bbe=a0_0x328251,_0x1ebce2=this[_0x383bbe(0x21d)]['positions'][_0x383bbe(0x242)](_0x36e6bb=>_0x36e6bb['id']===_0x3f4dee);if(!_0x1ebce2)return;const _0x2acc37=_0x1ebce2[_0x383bbe(0x267)]===_0x383bbe(0x1ef)?(_0x22e544-_0x1ebce2['entry'])*_0x4fb415:(_0x1ebce2[_0x383bbe(0x278)]-_0x22e544)*_0x4fb415;_0x1ebce2[_0x383bbe(0x1da)][_0x383bbe(0x1e1)]({'quantity':_0x4fb415,'price':_0x22e544,'pnl':_0x2acc37,'tpLevel':_0x26b558,'time':Date['now']()}),_0x1ebce2[_0x383bbe(0x259)]-=_0x4fb415,this[_0x383bbe(0x21d)]['dailyStats'][_0x383bbe(0x25f)]+=_0x2acc37,this[_0x383bbe(0x21d)][_0x383bbe(0x25b)][_0x383bbe(0x25f)]+=_0x2acc37,this['config']['capital'][_0x383bbe(0x209)]+=_0x2acc37,this[_0x383bbe(0x1fa)]();},'closePosition'(_0x3300c0,_0x3c9262,_0x322bcd='manual'){const _0x1a924f=a0_0x328251,_0x252848=this['state'][_0x1a924f(0x27a)][_0x1a924f(0x1e5)](_0x191a52=>_0x191a52['id']===_0x3300c0);if(_0x252848===-0x1)return{'success':![],'error':_0x1a924f(0x291)};const _0xba7952=this[_0x1a924f(0x21d)][_0x1a924f(0x27a)][_0x252848],_0x3d15e3=_0xba7952[_0x1a924f(0x267)]==='long'?(_0x3c9262-_0xba7952['entry'])*_0xba7952[_0x1a924f(0x259)]:(_0xba7952['entry']-_0x3c9262)*_0xba7952[_0x1a924f(0x259)],_0x33db03=_0x3d15e3+_0xba7952[_0x1a924f(0x1da)][_0x1a924f(0x23f)]((_0x2b15be,_0x48d130)=>_0x2b15be+_0x48d130[_0x1a924f(0x25f)],0x0),_0x16570c={..._0xba7952,'closePrice':_0x3c9262,'closeTime':Date[_0x1a924f(0x26e)](),'reason':_0x322bcd,'pnl':_0x33db03,'pnlPercent':_0x33db03/_0xba7952[_0x1a924f(0x241)]*0x64,'holdingTime':Date['now']()-_0xba7952[_0x1a924f(0x232)],'rMultiple':_0x33db03/_0xba7952[_0x1a924f(0x274)]};return this[_0x1a924f(0x21d)][_0x1a924f(0x27a)][_0x1a924f(0x27e)](_0x252848,0x1),this[_0x1a924f(0x21d)][_0x1a924f(0x213)][_0x1a924f(0x1e1)](_0x16570c),this[_0x1a924f(0x21d)]['dailyStats'][_0x1a924f(0x25f)]+=_0x3d15e3,this['state'][_0x1a924f(0x25b)][_0x1a924f(0x25f)]+=_0x3d15e3,this[_0x1a924f(0x249)][_0x1a924f(0x289)][_0x1a924f(0x209)]+=_0x3d15e3,_0x33db03>0x0?this[_0x1a924f(0x21d)][_0x1a924f(0x284)][_0x1a924f(0x204)]++:this['state']['dailyStats']['lossCount']++,this['updatePerformanceMetrics'](),this[_0x1a924f(0x1fa)](),this[_0x1a924f(0x1ff)](),{'success':!![],'trade':_0x16570c};},'updateDrawdown'(){const _0x5b3613=a0_0x328251,_0x343a25=this['config'][_0x5b3613(0x289)][_0x5b3613(0x209)],_0x5341c8=this['state'][_0x5b3613(0x247)]['peak'];_0x343a25>_0x5341c8&&(this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x20a)]=_0x343a25);const _0x492419=(this['state'][_0x5b3613(0x247)][_0x5b3613(0x20a)]-_0x343a25)/this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x20a)];this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x209)]=_0x343a25,this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x227)]=_0x492419;_0x492419>this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x217)]&&(this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x217)]=_0x492419);if(_0x492419>=this[_0x5b3613(0x249)]['drawdown']['pauseZone'])this[_0x5b3613(0x21d)][_0x5b3613(0x247)][_0x5b3613(0x236)]='pause',this[_0x5b3613(0x21d)]['drawdownState']['pausedUntil']=Date[_0x5b3613(0x26e)]()+this[_0x5b3613(0x249)][_0x5b3613(0x227)]['resetPeriodDays']*0x18*0x3c*0x3c*0x3e8;else{if(_0x492419>=this[_0x5b3613(0x249)][_0x5b3613(0x227)]['redZone'])this['state'][_0x5b3613(0x247)]['zone']='red';else _0x492419>=this['config'][_0x5b3613(0x227)]['yellowZone']?this['state'][_0x5b3613(0x247)][_0x5b3613(0x236)]=_0x5b3613(0x23b):this[_0x5b3613(0x21d)][_0x5b3613(0x247)]['zone']=_0x5b3613(0x261);}this[_0x5b3613(0x1ff)]();},'updatePerformanceMetrics'(){const _0x56ba3b=a0_0x328251,_0x49c146=this[_0x56ba3b(0x21d)][_0x56ba3b(0x213)];if(_0x49c146[_0x56ba3b(0x271)]===0x0)return;const _0x146d23=_0x49c146['filter'](_0x5d9185=>_0x5d9185[_0x56ba3b(0x25f)]>0x0),_0x2ab3bd=_0x49c146[_0x56ba3b(0x255)](_0x5cbaf6=>_0x5cbaf6['pnl']<=0x0);this['state'][_0x56ba3b(0x201)]['winRate']=_0x146d23[_0x56ba3b(0x271)]/_0x49c146[_0x56ba3b(0x271)],this[_0x56ba3b(0x21d)][_0x56ba3b(0x201)]['avgWin']=_0x146d23[_0x56ba3b(0x271)]>0x0?_0x146d23[_0x56ba3b(0x23f)]((_0x411908,_0x86bc07)=>_0x411908+_0x86bc07[_0x56ba3b(0x25f)],0x0)/_0x146d23[_0x56ba3b(0x271)]:0x0,this['state']['performance'][_0x56ba3b(0x1f5)]=_0x2ab3bd[_0x56ba3b(0x271)]>0x0?Math[_0x56ba3b(0x26c)](_0x2ab3bd[_0x56ba3b(0x23f)]((_0x23e9e6,_0x24ddfe)=>_0x23e9e6+_0x24ddfe['pnl'],0x0)/_0x2ab3bd['length']):0x0;const _0x38ebb4=_0x146d23[_0x56ba3b(0x23f)]((_0x307f71,_0x6ca782)=>_0x307f71+_0x6ca782[_0x56ba3b(0x25f)],0x0),_0xcb6366=Math['abs'](_0x2ab3bd['reduce']((_0x5bfdc2,_0x47cd71)=>_0x5bfdc2+_0x47cd71[_0x56ba3b(0x25f)],0x0));this['state'][_0x56ba3b(0x201)][_0x56ba3b(0x252)]=_0xcb6366>0x0?_0x38ebb4/_0xcb6366:_0x38ebb4,this[_0x56ba3b(0x21d)][_0x56ba3b(0x201)][_0x56ba3b(0x270)]=this['state'][_0x56ba3b(0x201)][_0x56ba3b(0x260)]*this['state'][_0x56ba3b(0x201)][_0x56ba3b(0x1f4)]-(0x1-this[_0x56ba3b(0x21d)]['performance'][_0x56ba3b(0x260)])*this[_0x56ba3b(0x21d)][_0x56ba3b(0x201)]['avgLoss'];const _0x1569a3=_0x49c146[_0x56ba3b(0x1e8)](_0x10b9ba=>_0x10b9ba[_0x56ba3b(0x203)]),_0x3811c5=_0x1569a3[_0x56ba3b(0x23f)]((_0x3ff373,_0x5c5c1f)=>_0x3ff373+_0x5c5c1f,0x0)/_0x1569a3[_0x56ba3b(0x271)],_0xaaa54c=_0x1569a3[_0x56ba3b(0x23f)]((_0x262b2b,_0x4a225a)=>_0x262b2b+Math[_0x56ba3b(0x1fe)](_0x4a225a-_0x3811c5,0x2),0x0)/_0x1569a3['length'],_0x1bff9c=Math[_0x56ba3b(0x24a)](_0xaaa54c);this[_0x56ba3b(0x21d)][_0x56ba3b(0x201)][_0x56ba3b(0x26d)]=_0x1bff9c>0x0?_0x3811c5/_0x1bff9c*Math[_0x56ba3b(0x24a)](0xfc):0x0,this[_0x56ba3b(0x21d)]['performance'][_0x56ba3b(0x208)]=_0x49c146[_0x56ba3b(0x271)];},'runMonteCarloSimulation'(_0x3eb84b=0x3e8,_0x4906c1=0x64){const _0x2b5245=a0_0x328251,_0xb38d9f=this[_0x2b5245(0x21d)][_0x2b5245(0x213)];if(_0xb38d9f[_0x2b5245(0x271)]<0x14)return{'error':_0x2b5245(0x21e)};const _0x1bfb87=[],_0x31de72=_0xb38d9f[_0x2b5245(0x1e8)](_0x57a10a=>_0x57a10a[_0x2b5245(0x203)]);for(let _0x14994e=0x0;_0x14994e<_0x3eb84b;_0x14994e++){let _0x3017e6=0x64,_0x4cc9bd=0x64,_0x5b855a=0x0;for(let _0x2eae9e=0x0;_0x2eae9e<_0x4906c1;_0x2eae9e++){const _0x4c566c=_0x31de72[Math[_0x2b5245(0x200)](Math[_0x2b5245(0x28f)]()*_0x31de72[_0x2b5245(0x271)])];_0x3017e6*=0x1+_0x4c566c/0x64;if(_0x3017e6>_0x4cc9bd)_0x4cc9bd=_0x3017e6;else{const _0x3a72d6=(_0x4cc9bd-_0x3017e6)/_0x4cc9bd;if(_0x3a72d6>_0x5b855a)_0x5b855a=_0x3a72d6;}}_0x1bfb87[_0x2b5245(0x1e1)]({'finalEquity':_0x3017e6,'return':(_0x3017e6-0x64)/0x64*0x64,'maxDrawdown':_0x5b855a*0x64});}return _0x1bfb87['sort']((_0x5dbf85,_0x92995a)=>_0x5dbf85[_0x2b5245(0x293)]-_0x92995a[_0x2b5245(0x293)]),{'simulations':_0x3eb84b,'trades':_0x4906c1,'percentiles':{'p5':_0x1bfb87[Math['floor'](_0x3eb84b*0.05)],'p25':_0x1bfb87[Math[_0x2b5245(0x200)](_0x3eb84b*0.25)],'p50':_0x1bfb87[Math[_0x2b5245(0x200)](_0x3eb84b*0.5)],'p75':_0x1bfb87[Math[_0x2b5245(0x200)](_0x3eb84b*0.75)],'p95':_0x1bfb87[Math[_0x2b5245(0x200)](_0x3eb84b*0.95)]},'probabilityOfProfit':_0x1bfb87[_0x2b5245(0x255)](_0x4fa497=>_0x4fa497[_0x2b5245(0x1f8)]>0x0)[_0x2b5245(0x271)]/_0x3eb84b,'probabilityOfRuin':_0x1bfb87[_0x2b5245(0x255)](_0x35dd85=>_0x35dd85[_0x2b5245(0x1f8)]<-0x32)['length']/_0x3eb84b,'averageReturn':_0x1bfb87[_0x2b5245(0x23f)]((_0x21b875,_0x41cb77)=>_0x21b875+_0x41cb77[_0x2b5245(0x1f8)],0x0)/_0x3eb84b,'averageMaxDD':_0x1bfb87['reduce']((_0x540d58,_0x268e12)=>_0x540d58+_0x268e12[_0x2b5245(0x217)],0x0)/_0x3eb84b};},'getPortfolioSummary'(){const _0x3f7edd=a0_0x328251,_0x565cc1=this[_0x3f7edd(0x21d)]['positions'],_0x476d6d=_0x565cc1[_0x3f7edd(0x23f)]((_0xcfcecf,_0x76762b)=>_0xcfcecf+_0x76762b['positionValue'],0x0),_0x137c21=0x0;return{'capital':{'initial':this['config'][_0x3f7edd(0x289)][_0x3f7edd(0x290)],'current':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x249)]['capital']['current']*0x64)/0x64,'pnl':Math['round']((this[_0x3f7edd(0x249)][_0x3f7edd(0x289)]['current']-this[_0x3f7edd(0x249)][_0x3f7edd(0x289)][_0x3f7edd(0x290)])*0x64)/0x64,'pnlPercent':Math[_0x3f7edd(0x280)]((this[_0x3f7edd(0x249)][_0x3f7edd(0x289)][_0x3f7edd(0x209)]/this[_0x3f7edd(0x249)][_0x3f7edd(0x289)][_0x3f7edd(0x290)]-0x1)*0x2710)/0x64},'positions':{'open':_0x565cc1[_0x3f7edd(0x271)],'maxAllowed':this[_0x3f7edd(0x249)][_0x3f7edd(0x272)][_0x3f7edd(0x207)],'totalExposure':Math[_0x3f7edd(0x280)](_0x476d6d*0x64)/0x64,'exposurePercent':Math[_0x3f7edd(0x280)](_0x476d6d/this[_0x3f7edd(0x249)][_0x3f7edd(0x289)][_0x3f7edd(0x209)]*0x2710)/0x64},'risk':{'dailyUsed':Math['round'](this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)]['riskUsed']*0x2710)/0x64,'dailyLimit':this[_0x3f7edd(0x249)][_0x3f7edd(0x272)]['maxRiskPerDay']*0x64,'weeklyUsed':Math['round'](this['state'][_0x3f7edd(0x25b)][_0x3f7edd(0x1df)]*0x2710)/0x64,'weeklyLimit':this[_0x3f7edd(0x249)][_0x3f7edd(0x272)][_0x3f7edd(0x228)]*0x64},'drawdown':{'current':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)]['drawdownState']['drawdown']*0x2710)/0x64,'max':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)]['drawdownState'][_0x3f7edd(0x217)]*0x2710)/0x64,'zone':this[_0x3f7edd(0x21d)][_0x3f7edd(0x247)][_0x3f7edd(0x236)],'peak':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)]['drawdownState'][_0x3f7edd(0x20a)]*0x64)/0x64},'performance':{'winRate':Math[_0x3f7edd(0x280)](this['state'][_0x3f7edd(0x201)][_0x3f7edd(0x260)]*0x2710)/0x64,'profitFactor':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)]['performance'][_0x3f7edd(0x252)]*0x64)/0x64,'expectancy':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)][_0x3f7edd(0x201)]['expectancy']*0x64)/0x64,'sharpeRatio':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)][_0x3f7edd(0x201)][_0x3f7edd(0x26d)]*0x64)/0x64,'totalTrades':this[_0x3f7edd(0x21d)][_0x3f7edd(0x201)][_0x3f7edd(0x208)]},'daily':{'date':this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)]['date'],'pnl':Math[_0x3f7edd(0x280)](this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)][_0x3f7edd(0x25f)]*0x64)/0x64,'trades':this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)][_0x3f7edd(0x23c)],'wins':this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)][_0x3f7edd(0x204)],'losses':this[_0x3f7edd(0x21d)][_0x3f7edd(0x284)][_0x3f7edd(0x256)]}};},'getDetailedPositions'(){const _0x4330e4=a0_0x328251;return this[_0x4330e4(0x21d)][_0x4330e4(0x27a)][_0x4330e4(0x1e8)](_0x5a87b9=>({'id':_0x5a87b9['id'],'symbol':_0x5a87b9['symbol'],'direction':_0x5a87b9[_0x4330e4(0x267)],'entry':_0x5a87b9[_0x4330e4(0x278)],'currentStop':_0x5a87b9['stopLoss'],'quantity':_0x5a87b9['quantity'],'value':_0x5a87b9[_0x4330e4(0x241)],'risk':_0x5a87b9[_0x4330e4(0x274)],'riskPercent':_0x5a87b9[_0x4330e4(0x1dc)],'targets':_0x5a87b9['takeProfitLevels'],'partialCloses':_0x5a87b9[_0x4330e4(0x1da)][_0x4330e4(0x271)],'holdingTime':Math['round']((Date[_0x4330e4(0x26e)]()-_0x5a87b9['openTime'])/0xea60),'stopMoves':_0x5a87b9['stopHistory'][_0x4330e4(0x271)]-0x1}));},'saveState'(){const _0x3d9c04=a0_0x328251;try{const _0x4fa793={...this['state'],'capital':this[_0x3d9c04(0x249)][_0x3d9c04(0x289)][_0x3d9c04(0x209)],'savedAt':Date[_0x3d9c04(0x26e)]()};localStorage[_0x3d9c04(0x265)](_0x3d9c04(0x1fc),JSON[_0x3d9c04(0x215)](_0x4fa793));}catch(_0x211e61){console[_0x3d9c04(0x1e4)](_0x3d9c04(0x23e));}},'loadState'(){const _0x1d1a6b=a0_0x328251;try{const _0x2610cc=localStorage[_0x1d1a6b(0x28d)](_0x1d1a6b(0x1fc));if(_0x2610cc){const _0x49d657=JSON[_0x1d1a6b(0x285)](_0x2610cc);this[_0x1d1a6b(0x21d)]={...this[_0x1d1a6b(0x21d)],..._0x49d657},_0x49d657[_0x1d1a6b(0x289)]&&(this[_0x1d1a6b(0x249)][_0x1d1a6b(0x289)][_0x1d1a6b(0x209)]=_0x49d657[_0x1d1a6b(0x289)]);}}catch(_0x40770d){console['warn'](_0x1d1a6b(0x277));}},'checkDailyReset'(){const _0x106c68=a0_0x328251,_0x399b7f=new Date()['toDateString']();this[_0x106c68(0x21d)]['dailyStats'][_0x106c68(0x212)]!==_0x399b7f&&(this[_0x106c68(0x21d)]['dailyStats']={'date':_0x399b7f,'pnl':0x0,'riskUsed':0x0,'tradesCount':0x0,'winCount':0x0,'lossCount':0x0});const _0xfd8076=new Date(),_0xe932b8=new Date(_0xfd8076[_0x106c68(0x1f3)](_0xfd8076['getDate']()-_0xfd8076[_0x106c68(0x25a)]()))['toDateString']();this[_0x106c68(0x21d)]['weeklyStats'][_0x106c68(0x250)]!==_0xe932b8&&(this['state'][_0x106c68(0x25b)]={'weekStart':_0xe932b8,'pnl':0x0,'riskUsed':0x0});},'exportTradeHistory'(){const _0x1e4b29=a0_0x328251;return{'trades':this['state'][_0x1e4b29(0x213)],'performance':this[_0x1e4b29(0x21d)]['performance'],'exportedAt':Date['now']()};}};window['SmartRiskManager']=SmartRiskManager,SmartRiskManager[a0_0x328251(0x266)](),console[a0_0x328251(0x254)](a0_0x328251(0x23d));