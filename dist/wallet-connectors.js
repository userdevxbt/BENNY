/**
 * SHDWXBT - wallet-connectors.js
 * Copyright (c) 2024-2026 SHDWXBT. All rights reserved.
 * 
 * PROPRIETARY AND CONFIDENTIAL
 * Unauthorized copying, modification, distribution, or use is strictly prohibited.
 * This code is protected by intellectual property laws.
 * 
 * Build: 2026-01-28T12:08:11.682Z
 * Checksum: SHDW-7E5DB1F7
 */
let walletModal=null,currentWalletProvider=null,walletConnectProvider=null,web3modal=null;const WALLETCONNECT_PROJECT_ID="802b1ed59d05d8007adfa5d5a2ed175c";function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function isInAppBrowser(){const e=navigator.userAgent||navigator.vendor||window.opera;return/MetaMask|Trust\/|OneKey/i.test(e)||window.ethereum&&(window.ethereum.isMetaMask||window.ethereum.isTrust)||window.$onekey&&window.$onekey.ethereum}function initWalletModal(){walletModal=document.getElementById("walletModal"),isMobile()&&isInAppBrowser()&&console.log("ðŸ“± Detected in-app browser, will auto-connect"),initWalletConnect()}let wcProviderModule=null;async function loadWalletConnectModules(){if(window.EthereumProvider)return console.log("âœ… WalletConnect loaded from global (UMD)"),{EthereumProvider:window.EthereumProvider};if(wcProviderModule)return{EthereumProvider:wcProviderModule};console.log("ðŸ“¦ Loading WalletConnect modules...");const e=["https://esm.sh/@walletconnect/ethereum-provider@2.11.2","https://cdn.jsdelivr.net/npm/@walletconnect/ethereum-provider@2.11.2/+esm"];let n=null;for(const o of e)try{console.log(`ðŸ“¦ Trying: ${o.split("/")[2]}...`);const e=await import(o);if(wcProviderModule=e.EthereumProvider||e.default,wcProviderModule&&"function"==typeof wcProviderModule.init)return console.log("âœ… WalletConnect provider loaded successfully"),{EthereumProvider:wcProviderModule}}catch(e){console.warn(`Failed to load from ${o.split("/")[2]}:`,e.message),n=e}throw console.error("Failed to load WalletConnect from all sources:",n),new Error("Failed to load WalletConnect. Please refresh the page and try again.")}async function initWalletConnect(){try{console.log("ðŸ”— WalletConnect ready for on-demand loading")}catch(e){console.error("WalletConnect init error:",e)}}async function connectWalletConnect(){try{console.log("ðŸ”— Connecting via WalletConnect..."),closeWalletModal();const e=document.getElementById("feedback-msg");e&&(e.innerText="Loading WalletConnect...",e.classList.remove("text-transparent"),e.classList.add("text-white/50"));const{EthereumProvider:n}=await loadWalletConnectModules();if(e&&(e.innerText="Connecting..."),isMobile()){console.log("ðŸ“± Mobile detected, using custom flow..."),walletConnectProvider=await n.init({projectId:WALLETCONNECT_PROJECT_ID,chains:[1],optionalChains:[56,137,42161,10,8453,43114],showQrModal:!1,metadata:{name:"BENNY",description:"BENNY Trading Platform",url:"https://bennybsc.xyz",icons:["https://bennybsc.xyz/favicon.ico"]},relayUrl:"wss://relay.walletconnect.com"});let e=!1;walletConnectProvider.on("display_uri",n=>{console.log("ðŸ“± URI received:",n?n.substring(0,60)+"...":"null"),e=!0,n&&updateMobileWalletList(n)}),showMobileWalletOptions(null),console.log("ðŸ“± Starting connection...");try{const n=walletConnectProvider.connect();setTimeout(()=>{!e&&walletConnectProvider.uri&&(console.log("ðŸ“± Using provider.uri fallback"),updateMobileWalletList(walletConnectProvider.uri))},2e3),await n,hideMobileWalletOptions()}catch(e){if(hideMobileWalletOptions(),e.message?.includes("User rejected")||e.message?.includes("closed"))throw new Error("Connection cancelled");throw e}}else walletConnectProvider=await n.init({projectId:WALLETCONNECT_PROJECT_ID,chains:[1],optionalChains:[56,137,42161,10,8453,43114],showQrModal:!0,qrModalOptions:{themeMode:"dark",themeVariables:{"--wcm-z-index":"999999","--wcm-accent-color":"#a855f7","--wcm-background-color":"#18181b"}},metadata:{name:"BENNY",description:"BENNY Trading Platform",url:"https://bennybsc.xyz",icons:["https://bennybsc.xyz/favicon.ico"]},relayUrl:"wss://relay.walletconnect.com"}),console.log("ðŸ–¥ï¸ Desktop: using QR modal..."),await walletConnectProvider.connect();const o=walletConnectProvider.accounts;if(!o||0===o.length)throw new Error("No accounts returned from WalletConnect");const t=new ethers.providers.Web3Provider(walletConnectProvider);return window.currentSigner=t.getSigner(),window.currentProvider=walletConnectProvider,window.currentEthersProvider=t,walletConnectProvider.on("disconnect",()=>{console.log("ðŸ”Œ WalletConnect disconnected"),window.currentSigner=null,window.currentProvider=null,window.currentEthersProvider=null,walletConnectProvider=null}),walletConnectProvider.on("accountsChanged",e=>{console.log("ðŸ‘› WalletConnect accounts changed:",e),0===e.length&&(window.currentSigner=null,window.currentProvider=null)}),console.log("âœ… WalletConnect connected:",o[0]),o[0].toLowerCase()}catch(e){if(console.error("WalletConnect error:",e),hideMobileWalletOptions(),e.message?.includes("User rejected")||e.message?.includes("User closed"))throw new Error("Connection rejected by user");throw e}}function showMobileWalletOptions(e){let n=document.getElementById("mobileWalletModal");if(!n){n=document.createElement("div"),n.id="mobileWalletModal",n.innerHTML='\n            <style>\n                #mobileWalletModal {\n                    position: fixed;\n                    inset: 0;\n                    display: none;\n                    align-items: center;\n                    justify-content: center;\n                    z-index: 9999;\n                    padding: 1rem;\n                }\n                \n                #mobileWalletModal.active {\n                    display: flex;\n                    animation: mobileModalFadeIn 0.3s ease-out;\n                }\n                \n                @keyframes mobileModalFadeIn {\n                    from { opacity: 0; }\n                    to { opacity: 1; }\n                }\n                \n                #mobileWalletModal .modal-backdrop {\n                    position: absolute;\n                    inset: 0;\n                    background: rgba(0, 0, 0, 0.85);\n                    backdrop-filter: blur(10px);\n                }\n                \n                #mobileWalletModal .mobile-wallet-container {\n                    position: relative;\n                    width: 100%;\n                    max-width: 400px;\n                    max-height: 85vh;\n                    overflow-y: auto;\n                    padding: 2rem;\n                    background: rgba(39, 39, 42, 0.98);\n                    backdrop-filter: blur(40px) saturate(180%);\n                    -webkit-backdrop-filter: blur(40px) saturate(180%);\n                    border-radius: 1.5rem;\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    box-shadow: \n                        0 25px 60px rgba(0, 0, 0, 0.6),\n                        inset 0 1px 0 rgba(255, 255, 255, 0.1);\n                    animation: mobileSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n                }\n                \n                @keyframes mobileSlideIn {\n                    from { \n                        transform: translateY(20px) scale(0.95);\n                        opacity: 0;\n                    }\n                    to { \n                        transform: translateY(0) scale(1);\n                        opacity: 1;\n                    }\n                }\n                \n                #mobileWalletModal .mobile-wallet-container::before {\n                    content: \'\';\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    height: 50%;\n                    background: linear-gradient(\n                        180deg,\n                        rgba(255, 255, 255, 0.06) 0%,\n                        transparent 100%\n                    );\n                    border-radius: 1.5rem 1.5rem 0 0;\n                    pointer-events: none;\n                }\n                \n                #mobileWalletModal .close-btn {\n                    position: absolute;\n                    top: 1rem;\n                    right: 1rem;\n                    width: 36px;\n                    height: 36px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    background: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 50%;\n                    color: rgba(255, 255, 255, 0.6);\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    font-size: 1.25rem;\n                }\n                \n                #mobileWalletModal .close-btn:hover {\n                    background: rgba(255, 255, 255, 0.1);\n                    color: white;\n                    transform: rotate(90deg);\n                }\n                \n                #mobileWalletModal .modal-header {\n                    text-align: center;\n                    margin-bottom: 1.5rem;\n                }\n                \n                #mobileWalletModal .modal-header h3 {\n                    font-size: 1.5rem;\n                    font-weight: 700;\n                    color: white;\n                    margin-bottom: 0.5rem;\n                }\n                \n                #mobileWalletModal .modal-header p {\n                    color: rgba(255, 255, 255, 0.5);\n                    font-size: 0.875rem;\n                }\n                \n                #mobileWalletModal .wallet-list {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 0.75rem;\n                }\n                \n                #mobileWalletModal .wallet-item {\n                    display: flex;\n                    align-items: center;\n                    gap: 1rem;\n                    padding: 1rem 1.25rem;\n                    background: rgba(255, 255, 255, 0.03);\n                    border: 1px solid rgba(255, 255, 255, 0.08);\n                    border-radius: 1rem;\n                    text-decoration: none;\n                    color: white;\n                    transition: all 0.3s ease;\n                    position: relative;\n                    overflow: hidden;\n                }\n                \n                #mobileWalletModal .wallet-item::before {\n                    content: \'\';\n                    position: absolute;\n                    inset: 0;\n                    background: linear-gradient(\n                        135deg,\n                        rgba(168, 85, 247, 0.1) 0%,\n                        transparent 100%\n                    );\n                    opacity: 0;\n                    transition: opacity 0.3s ease;\n                }\n                \n                #mobileWalletModal .wallet-item:hover {\n                    background: rgba(255, 255, 255, 0.08);\n                    border-color: rgba(255, 255, 255, 0.2);\n                    transform: translateX(4px);\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n                }\n                \n                #mobileWalletModal .wallet-item:hover::before {\n                    opacity: 0;\n                }\n                \n                #mobileWalletModal .wallet-item:active {\n                    transform: translateX(4px) scale(0.98);\n                }\n                \n                #mobileWalletModal .wallet-icon {\n                    width: 2.5rem;\n                    height: 2.5rem;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    background: rgba(255, 255, 255, 0.05);\n                    border-radius: 0.75rem;\n                    overflow: hidden;\n                }\n                \n                #mobileWalletModal .wallet-icon img {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: contain;\n                }\n                \n                #mobileWalletModal .wallet-name {\n                    font-weight: 600;\n                    font-size: 1rem;\n                }\n                \n                #mobileWalletModal .wallet-arrow {\n                    margin-left: auto;\n                    color: rgba(255, 255, 255, 0.5);\n                    font-size: 1.25rem;\n                    transition: transform 0.3s ease;\n                }\n                \n                #mobileWalletModal .wallet-item:hover .wallet-arrow {\n                    transform: translateX(4px);\n                    color: white;\n                }\n            </style>\n            <div class="modal-backdrop" onclick="hideMobileWalletOptions()"></div>\n            <div class="mobile-wallet-container">\n                <div class="close-btn" onclick="hideMobileWalletOptions()">âœ•</div>\n                <div class="modal-header">\n                    <h3>Choose Wallet</h3>\n                    <p>Select your wallet app to connect</p>\n                </div>\n                <div id="mobileWalletLoading" class="wallet-loading" style="display: none;">\n                    <div class="loading-spinner"></div>\n                    <p>Generating connection...</p>\n                </div>\n                <div class="wallet-list" id="mobileWalletList">\n                </div>\n            </div>\n        ';const e=document.createElement("style");e.textContent="\n            .wallet-loading {\n                text-align: center;\n                padding: 2rem;\n            }\n            .wallet-loading p {\n                color: rgba(255,255,255,0.6);\n                margin-top: 1rem;\n                font-size: 0.875rem;\n            }\n            .loading-spinner {\n                width: 40px;\n                height: 40px;\n                border: 3px solid rgba(255,255,255,0.1);\n                border-top-color: #a855f7;\n                border-radius: 50%;\n                margin: 0 auto;\n                animation: spin 1s linear infinite;\n            }\n            @keyframes spin {\n                to { transform: rotate(360deg); }\n            }\n        ",document.head.appendChild(e),document.body.appendChild(n)}const o=document.getElementById("mobileWalletList"),t=document.getElementById("mobileWalletLoading");if(!e)return t&&(t.style.display="block"),o&&(o.style.display="none"),void n.classList.add("active");t&&(t.style.display="none"),o&&(o.style.display="flex");const l=[{name:"MetaMask",icon:"https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg",deepLink:`https://metamask.app.link/wc?uri=${encodeURIComponent(e)}`},{name:"Trust Wallet",icon:"https://trustwallet.com/assets/images/media/assets/trust_platform.svg",deepLink:`https://link.trustwallet.com/wc?uri=${encodeURIComponent(e)}`},{name:"Rainbow",icon:"https://avatars.githubusercontent.com/u/48327834?s=200&v=4",deepLink:`https://rnbwapp.com/wc?uri=${encodeURIComponent(e)}`},{name:"Coinbase Wallet",icon:"https://avatars.githubusercontent.com/u/18060234?s=200&v=4",deepLink:`https://go.cb-w.com/wc?uri=${encodeURIComponent(e)}`},{name:"Ledger Live",icon:"https://www.ledger.com/wp-content/uploads/2023/10/Ledger-Live-logo.webp",deepLink:`ledgerlive://wc?uri=${encodeURIComponent(e)}`},{name:"SafePal",icon:"https://www.safepal.com/images/download/logo.png",deepLink:`safepalwallet://wc?uri=${encodeURIComponent(e)}`},{name:"Zerion",icon:"https://avatars.githubusercontent.com/u/43045932?s=200&v=4",deepLink:`https://wallet.zerion.io/wc?uri=${encodeURIComponent(e)}`},{name:"imToken",icon:"https://token.im/img/imTokenLogo.svg",deepLink:`imtokenv2://wc?uri=${encodeURIComponent(e)}`}];o.innerHTML=l.map(e=>`\n        <a href="${e.deepLink}" class="wallet-item" target="_blank" rel="noopener">\n            <span class="wallet-icon"><img src="${e.icon}" alt="${e.name}" onerror="this.parentElement.innerHTML='${e.name[0]}'"></span>\n            <span class="wallet-name">${e.name}</span>\n            <span class="wallet-arrow">â†’</span>\n        </a>\n    `).join(""),n.classList.add("active")}function updateMobileWalletList(e){const n=document.getElementById("mobileWalletList"),o=document.getElementById("mobileWalletLoading");if(!n||!e)return;o&&(o.style.display="none"),n.style.display="flex";const t=[{name:"MetaMask",icon:"https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg",deepLink:`https://metamask.app.link/wc?uri=${encodeURIComponent(e)}`},{name:"Trust Wallet",icon:"https://trustwallet.com/assets/images/media/assets/trust_platform.svg",deepLink:`https://link.trustwallet.com/wc?uri=${encodeURIComponent(e)}`},{name:"Rainbow",icon:"https://avatars.githubusercontent.com/u/48327834?s=200&v=4",deepLink:`https://rnbwapp.com/wc?uri=${encodeURIComponent(e)}`},{name:"Coinbase Wallet",icon:"https://avatars.githubusercontent.com/u/18060234?s=200&v=4",deepLink:`https://go.cb-w.com/wc?uri=${encodeURIComponent(e)}`},{name:"Ledger Live",icon:"https://www.ledger.com/wp-content/uploads/2023/10/Ledger-Live-logo.webp",deepLink:`ledgerlive://wc?uri=${encodeURIComponent(e)}`},{name:"SafePal",icon:"https://www.safepal.com/images/download/logo.png",deepLink:`safepalwallet://wc?uri=${encodeURIComponent(e)}`},{name:"Zerion",icon:"https://avatars.githubusercontent.com/u/43045932?s=200&v=4",deepLink:`https://wallet.zerion.io/wc?uri=${encodeURIComponent(e)}`},{name:"imToken",icon:"https://token.im/img/imTokenLogo.svg",deepLink:`imtokenv2://wc?uri=${encodeURIComponent(e)}`}];n.innerHTML=t.map(e=>`\n        <a href="${e.deepLink}" class="wallet-item" target="_blank" rel="noopener">\n            <span class="wallet-icon"><img src="${e.icon}" alt="${e.name}" onerror="this.parentElement.innerHTML='${e.name[0]}'"></span>\n            <span class="wallet-name">${e.name}</span>\n            <span class="wallet-arrow">â†’</span>\n        </a>\n    `).join("")}function hideMobileWalletOptions(){const e=document.getElementById("mobileWalletModal");e&&e.classList.remove("active")}async function disconnectWalletConnect(){try{walletConnectProvider&&(await walletConnectProvider.disconnect(),walletConnectProvider=null,console.log("ðŸ”Œ WalletConnect disconnected"))}catch(e){console.error("Error disconnecting WalletConnect:",e)}}function openWalletModal(){walletModal&&walletModal.classList.add("active")}function closeWalletModal(){walletModal&&walletModal.classList.remove("active")}function cancelWalletConnection(){closeWalletModal(),window.walletConnectionPromise&&(window.walletConnectionPromise.reject(new Error("Connection cancelled")),window.walletConnectionPromise=null)}async function connectMetaMask(){try{if(console.log("ðŸ¦Š Connecting MetaMask..."),closeWalletModal(),isMobile()&&!window.ethereum?.isMetaMask){encodeURIComponent(window.location.href);const e=`https://metamask.app.link/dapp/${window.location.host}${window.location.pathname}`;throw console.log("ðŸ“± Opening MetaMask app via deep link:",e),window.location.href=e,new Error("REDIRECT_TO_APP")}if(!window.ethereum){if(isMobile()){const e=`https://metamask.app.link/dapp/${window.location.host}${window.location.pathname}`;throw window.location.href=e,new Error("REDIRECT_TO_APP")}throw new Error("MetaMask not installed. Please install MetaMask extension.")}let e=window.ethereum;window.ethereum.providers&&(e=window.ethereum.providers.find(e=>e.isMetaMask)||window.ethereum);const n=await e.request({method:"eth_requestAccounts"});if(!n||0===n.length)throw new Error("No accounts found in MetaMask");const o=new ethers.providers.Web3Provider(e);return window.currentSigner=o.getSigner(),window.currentProvider=e,window.currentEthersProvider=o,console.log("âœ… MetaMask connected:",n[0]),n[0].toLowerCase()}catch(e){if("REDIRECT_TO_APP"===e.message)return new Promise(()=>{});throw console.error("MetaMask connection error:",e),e}}async function connectOneKey(){try{if(console.log("ðŸ”‘ Connecting OneKey..."),closeWalletModal(),isMobile()&&(!window.$onekey||!window.$onekey.ethereum)){const e=`onekey-wallet://wc?uri=${encodeURIComponent(window.location.href)}`;throw console.log("ðŸ“± Opening OneKey app via deep link"),window.location.href=e,setTimeout(()=>{if("visible"===document.visibilityState){const e=/iPad|iPhone|iPod/.test(navigator.userAgent);window.location.href=e?"https://apps.apple.com/app/onekey/id1609559473":"https://play.google.com/store/apps/details?id=so.onekey.app.wallet"}},2500),new Error("REDIRECT_TO_APP")}if(window.$onekey&&window.$onekey.ethereum){const e=await window.$onekey.ethereum.request({method:"eth_requestAccounts"}),n=new ethers.providers.Web3Provider(window.$onekey.ethereum);return window.currentSigner=n.getSigner(),window.currentProvider=window.$onekey.ethereum,window.currentEthersProvider=n,console.log("âœ… OneKey connected:",e[0]),e[0].toLowerCase()}throw new Error("OneKey Wallet not detected. Please install OneKey extension.")}catch(e){if("REDIRECT_TO_APP"===e.message)return new Promise(()=>{});throw console.error("OneKey error:",e),e}}async function connectTrust(){try{if(console.log("ðŸ›¡ï¸ Connecting Trust Wallet..."),closeWalletModal(),window.ethereum&&window.ethereum.isTrust){console.log("ðŸ“± Inside Trust Wallet app, connecting...");const e=await window.ethereum.request({method:"eth_requestAccounts"}),n=new ethers.providers.Web3Provider(window.ethereum);return window.currentSigner=n.getSigner(),window.currentProvider=window.ethereum,window.currentEthersProvider=n,console.log("âœ… Trust Wallet connected:",e[0]),e[0].toLowerCase()}if(isMobile()){const e=`https://link.trustwallet.com/open_url?coin_id=60&url=${encodeURIComponent(window.location.href)}`;throw console.log("ðŸ“± Opening Trust Wallet app via deep link:",e),window.location.href=e,new Error("REDIRECT_TO_APP")}throw new Error("Trust Wallet not detected. Please use Trust Wallet mobile app or install the browser extension.")}catch(e){if("REDIRECT_TO_APP"===e.message)return new Promise(()=>{});throw console.error("Trust Wallet error:",e),e}}async function connectInjected(){try{if(console.log("ðŸ”— Connecting to injected wallet..."),closeWalletModal(),!window.ethereum)throw new Error("No wallet detected. Please install a Web3 wallet.");const e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw new Error("No accounts found");const n=new ethers.providers.Web3Provider(window.ethereum);return window.currentSigner=n.getSigner(),window.currentProvider=window.ethereum,window.currentEthersProvider=n,console.log("âœ… Wallet connected:",e[0]),e[0].toLowerCase()}catch(e){throw console.error("Injected wallet error:",e),e}}async function requestWallet(){if(isMobile()&&window.ethereum){console.log("ðŸ“± Mobile with injected wallet detected, auto-connecting...");try{return await connectInjected()}catch(e){console.log("Auto-connect failed, showing modal...")}}return new Promise((e,n)=>{openWalletModal();const o=setTimeout(()=>{closeWalletModal(),n(new Error("Connection timeout. Please try again.")),window.walletConnectionPromise=null},6e4);window.walletConnectionPromise={resolve:n=>{clearTimeout(o),e(n),window.walletConnectionPromise=null},reject:e=>{clearTimeout(o),n(e),window.walletConnectionPromise=null}}})}function handleWalletSelection(e){window.walletConnectionPromise||(window.walletConnectionPromise={resolve:e=>console.log("Connected:",e),reject:e=>console.error("Failed:",e)}),Promise.resolve().then(()=>e()).then(e=>{e&&window.walletConnectionPromise&&window.walletConnectionPromise.resolve(e)}).catch(e=>{"REDIRECT_TO_APP"!==e.message&&(console.error(e),window.walletConnectionPromise&&window.walletConnectionPromise.reject(e))})}window.isMobile=isMobile,window.isInAppBrowser=isInAppBrowser,window.requestWallet=requestWallet,window.openWalletModal=openWalletModal,window.closeWalletModal=closeWalletModal,window.cancelWalletConnection=cancelWalletConnection,window.connectMetaMask=connectMetaMask,window.connectOneKey=connectOneKey,window.connectTrust=connectTrust,window.connectInjected=connectInjected,window.connectWalletConnect=connectWalletConnect,window.disconnectWalletConnect=disconnectWalletConnect,window.handleWalletSelection=handleWalletSelection,window.showMobileWalletOptions=showMobileWalletOptions,window.hideMobileWalletOptions=hideMobileWalletOptions,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initWalletModal):initWalletModal();